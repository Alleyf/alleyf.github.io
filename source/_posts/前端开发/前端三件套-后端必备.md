---
title: å‰ç«¯ä¸‰ä»¶å¥—-åç«¯å¿…å¤‡
date: 2024-01-01 19:00:54
tags:
  - frontend
  - javascript
  - html
  - css
sticky: 95
excerpt: åç«¯ç¨‹åºå‘˜éœ€è¦æŒæ¡çš„å‰ç«¯å¿…å¤‡çŸ¥è¯†ã€‚
author: fcs
index_img: https://api.oyohen.com/bing.php
lang: zh-CN
theme: rose-pine-dawn
_class: lead
paginate: true
headingDivider:
  - 2
  - 3
  - 4
header: å‰ç«¯å­¦ä¹ ç¬”è®°
footer: \ *èŒƒè´¢èƒœï¼ˆåä¸­ç§‘æŠ€å¤§å­¦ï¼‰* *alleyf@qq.com* *${2024-01-02 13:57:32}*
backgroundColor: 
backgroundImage: url('')
number headings: auto, first-level 1, max 6, start-at 1, 1.1
---
# 1 JS
## 1.1 JavaScript-å¯¼å…¥å¯¼å‡º
JS æä¾›çš„å¯¼å…¥å¯¼å‡ºæœºåˆ¶ï¼Œå¯ä»¥å®ç°æŒ‰éœ€å¯¼å…¥ã€‚
**å‘½åå¯¼å‡ºï¼š**
```js
//showMessage.js
//ç®€å•çš„å±•ç¤ºä¿¡æ¯
function simpleMessage(msg){
console.1og(msg)
}
//å¤æ‚çš„å±•ç¤ºä¿¡æ¯
function complexMessage(msg){
	console.log(new Date()+":"+msg)
}
//æ‰¹é‡å¯¼å‡ºä¸€æ‰¹æ–¹æ³•æˆ–å˜é‡ï¼Œä¹Ÿå¯ä»¥åœ¨æ–¹æ³•å¤´å¯¼å‡º
export {simpleMessage,complexMessage}
//æ”¯æŒåˆ«åå¯¼å‡º
//export {simpleMessage as sm,complexMessage as cm}
```

---
**å‘½åå¯¼å…¥ï¼š**
```html
<!-- message.html -->
<body>
	<div>
	<button id="bn">ç‚¹æˆ‘å±•ç¤ºä¿¡æ¯</button>
	</div>
	<script type="module">
		import {complexMessage} from './showMessage.js'
		<!-- import {complexMessage as cm}   from './showMessage.js' -->
		document.getElementById("btn").onclick function(){
			complexMessage('bbbbb');
			<!-- cm('aaa') -->
		}
	</script>
</body>
```
> å¯¼å…¥å’Œå¯¼å‡ºçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ as é‡å‘½å

---
å½“ js ä¸­çš„æ–¹æ³•è¿‡å¤šæ—¶å¯ä»¥é‡‡ç”¨é»˜è®¤å¯¼å‡ºå¯¼å…¥æ–¹å¼ã€‚
**é»˜è®¤å¯¼å‡ºï¼ˆå¯¼å‡ºä¸€ä¸ª js å¯¹è±¡ï¼Œé€šè¿‡å¯¹è±¡çš„æ–¹å¼è°ƒç”¨æ–¹æ³•ï¼‰ï¼š**
```js
//showMessage.js
//ç®€å•çš„å±•ç¤ºä¿¡æ¯
function simpleMessage(msg){
console.1og(msg)
}
//å¤æ‚çš„å±•ç¤ºä¿¡æ¯
function complexMessage(msg){
	console.log(new Date()+":"+msg)
}
//é»˜è®¤å¯¼å‡º
export default {simpleMessage,complexMessage}
```
**å¯¼å…¥é»˜è®¤ï¼š**
```js
<!-- message.html -->
<body>
	<div>
	<button id="bn">ç‚¹æˆ‘å±•ç¤ºä¿¡æ¯</button>
	</div>
	<script type="module">
		import messageMethods from './showMessage.js'
		messageMethods.simpleMessage('aaa');
		messageMethods.complexMessage('bbb');
		}
	</script>
</body>
```

---
## 1.2 ...çš„ç”¨æ³•

1. æ‰©å±•è¿ç®—ç¬¦ï¼ˆSpread Operatorï¼‰

**æ•°ç»„å±•å¼€**ï¼š

```js
    const arr1 = [1, 2, 3];
    const arr2 = [...arr1, 4, 5]; // [1, 2, 3, 4, 5]
```

å‡½æ•°è°ƒç”¨ï¼š
```js
    function sum(a, b, c) {
      return a + b + c;
    }
     
    const numbers = [1, 2, 3];
    const result = sum(...numbers); // 6
```

**å¯¹è±¡å­—é¢é‡**ï¼š
```js
    const obj1 = { x: 1, y: 2 };
    const obj2 = { ...obj1, z: 3 }; // { x: 1, y: 2, z: 3 }

```

2. å‰©ä½™å‚æ•°ï¼ˆRest Parametersï¼‰ï¼š å‰©ä½™å‚æ•°å…è®¸æˆ‘ä»¬å°†å¤šä¸ªå‚æ•°æ”¶é›†åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¯ä»¥åœ¨å‡½æ•°å®šä¹‰æ—¶ä½¿ç”¨ã€‚

```js
function sum(...numbers) {
  let total = 0;
  for (let number of numbers) {
    total += number;
  }
  return total;
}
 
console.log(sum(1, 2, 3)); // 6
console.log(sum(4, 5, 6, 7)); // 22
```
åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå‰©ä½™å‚æ•°Â `...numbers`Â æ¥æ”¶äº†æ‰€æœ‰ä¼ é€’ç»™Â `sum`Â å‡½æ•°çš„å‚æ•°ï¼Œå¹¶å°†å®ƒä»¬ä½œä¸ºä¸€ä¸ªæ•°ç»„å­˜å‚¨åœ¨Â `numbers`Â ä¸­ã€‚  

---
# 2 Vue
## 2.1 å¿«é€Ÿå…¥é—¨
1. *å‡†å¤‡å·¥ä½œ*
- å¼•å…¥ Vue æ¨¡å—
- åˆ›å»º Vue çš„åº”ç”¨å®ä¾‹
- å®šä¹‰å…ƒç´ (div),äº¤ç»™ Vue æ§åˆ¶
  
2. *æ„å»ºç”¨æˆ·ç•Œé¢*
- å‡†å¤‡æ•°æ®
- ç”¨æ’å€¼è¡¨è¾¾å¼æ¸²æŸ“
### 2.1.1 æ¸è¿›å¼ç”¨æ³•
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="app">
    <h1>{{message}}</h1>
    <p>ç‚¹å‡»æ¬¡æ•°ï¼š{{count}}</p>
    <p>å¾—åˆ†ï¼š{{double()}}</p>
    <button @click="increment">+</button>
  </div>
  <!-- å¼•å…¥vueæ¨¡å— -->
  <script type="module">
      import { createApp, ref } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'
      // åˆ›å»ºä¸€ä¸ªvueå®ä¾‹
      const app = createApp({
          // ç»„åˆå¼å†™æ³•
          setup() {
              // å®šä¹‰ä¸€ä¸ªæ•°æ®
              const message = ref('hello world')
              const count = ref(0)
              // å®šä¹‰ä¸€ä¸ªæ–¹æ³•
              const increment = () => {
                  count.value++
              }
              // å®šä¹‰ä¸€ä¸ªè®¡ç®—å±æ€§
              const double = () => {
                  return count.value * 2
              }
              return {
                  message,
                  count,
                  increment,
                  double
              }
            }
          })
          // æŒ‚è½½åˆ°idä¸ºappçš„å…ƒç´ ä¸Š
          app.mount('#app')
  </script>
</body>
</html>
```

---
## 2.2 å¸¸ç”¨æŒ‡ä»¤
æŒ‡ä»¤ï¼šHTML æ ‡ç­¾ä¸Šå¸¦æœ‰ V-å‰ç¼€çš„ç‰¹æ®Šå±æ€§ï¼Œä¸åŒçš„æŒ‡ä»¤å…·æœ‰ä¸åŒçš„å«ä¹‰ï¼Œå¯ä»¥å®ç°ä¸åŒçš„åŠŸèƒ½ã€‚
å¸¸ç”¨æŒ‡ä»¤ï¼š
| æŒ‡ä»¤ | ä½œç”¨ |
| :----: | ---- |
| `v-for` | åˆ—è¡¨æ¸²æŸ“ï¼Œéå†å®¹å™¨çš„å…ƒç´ æˆ–è€…å¯¹è±¡çš„å±æ€§ |
| `v-bind` | ä¸º HTML æ ‡ç­¾ç»‘å®šå±æ€§å€¼ï¼Œå¦‚è®¾ç½® href,css æ ·å¼ç­‰ |
| `v-if/v-else-if/v-else` | æ¡ä»¶æ€§çš„æ¸²æŸ“æŸå…ƒç´ ï¼Œåˆ¤å®šä¸º true æ—¶æ¸²æŸ“ï¼Œå¦ä¾§ä¸æ¸²æŸ“ |
| `v-show` | æ ¹æ®æ¡ä»¶å±•ç¤ºæŸå…ƒç´ ï¼ŒåŒºåˆ«åœ¨äºåˆ‡æ¢çš„æ˜¯ display å±æ€§çš„å€¼ |
| `v-model` | åœ¨è¡¨å•å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®š |
| `v-on` | ä¸º HTML æ ‡ç­¾ç»‘å®šäº‹ä»¶ |

---
### 2.2.1 v-for
ä½œç”¨ï¼šåˆ—è¡¨æ¸²æŸ“ï¼Œéå†å®¹å™¨çš„å…ƒç´ æˆ–è€…å¯¹è±¡çš„å±æ€§
è¯­æ³•ï¼š`v-for="(item,ndex)in items"`
å‚æ•°è¯´æ˜ï¼š
- items ä¸ºéå†çš„æ•°ç»„
- item ä¸ºéå†å‡ºæ¥çš„å…ƒç´ 
- index ä¸ºç´¢å¼•/ä¸‹æ ‡ï¼Œä» 0 å¼€å§‹ï¼›å¯ä»¥çœç•¥ï¼Œçœç•¥ index è¯­æ³•ï¼š`v-for="item in items"`

> [!WARNING] æ³¨æ„
> éå†çš„æ•°ç»„ï¼Œé€‰æ‹©å¼å¿…é¡»åœ¨ data ä¸­å®šä¹‰ï¼Œç»„åˆå¼ç›´æ¥å®šä¹‰å“åº”å¼æ•°æ®ï¼›è¦æƒ³è®©å“ªä¸ªæ ‡ç­¾å¾ªç¯å±•ç¤ºå¤šæ¬¡ï¼Œå°±åœ¨å“ªä¸ªæ ‡ç­¾ä¸Šä½¿ç”¨ V-for æŒ‡ä»¤ã€‚

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="app">
    <ul>
      <li v-for="item in list">
        {{item}}
      </li>
    </ul>
    <ol>
      <li v-for="(item,index) in list">
        {{index}}-{{item}}
      </li>
    </ol>
    <table border="1" width="100%" align="center" cellspacing="0" cellpadding="0">
      <thead>
        <tr style="text-align: center;">
          <th>å§“å</th>
          <th>å¹´é¾„</th>
          <th>æ€§åˆ«</th>
        </tr>
      </thead>
      <tbody style="text-align: center;">
        <tr v-for="(item,index) in objLs">
          <td>{{index}}-{{item.name}}</td>
          <td>{{index}}-{{item.age}}</td>
          <td>{{index}}-{{item.sex}}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <script type="module">
    import { createApp, ref, reactive } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'
    const app = createApp({
      setup () {
        const list = ref(['a', 'b', 'c'])
        const objLs = reactive([
          {
            name: 'ruan',
            age: 12,
            sex: 'ğŸš¹'
          },
          {
            name: 'alleyf',
            age: 20,
            sex: 'ğŸš¹'
          },
          {
            name: 'wang',
            age: 21,
            sex: 'ğŸšº'
          }
        ])
        return {
          list,
          objLs
        }
      }
    })
    app.mount('#app')
  </script>
  </script>
</body>
</html>
```

---
### 2.2.2 v-bind
ä½œç”¨ï¼šåŠ¨æ€ä¸º HTML æ ‡ç­¾ç»‘å®šå±æ€§å€¼ï¼Œå¦‚è®¾ç½®  *href,src,style* æ ·å¼ç­‰ã€‚
è¯­æ³•ï¼š`v-bind:å±æ€§å="å±æ€§å€¼"`
ç®€åŒ–ï¼š`:å±æ€§å="å±æ€§å€¼"`
> v-bind æ‰€ç»‘å®šçš„æ•°æ®ï¼Œå¿…é¡»åœ¨ data ä¸­å®šä¹‰ã€‚

```html
<body>
  <div id="app">
    <a :href="url" style="text-decoration:solid;color:red;">{{title}}</a>
  </div>
  <script type="module">
    import { createApp, ref, reactive } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'
    const app = createApp({
      setup () {
        const url = ref("https://www.baidu.com")
        const title = ref("ç™¾åº¦ä¸€ä¸‹")
        return {
          url,
          title
        }
      }
    })
    app.mount('#app')
  </script>
  </script>
</body>
```
### 2.2.3 v-if/v-show
ä½œç”¨ï¼šè¿™ä¸¤ç±»æŒ‡ä»¤ï¼Œéƒ½æ˜¯ç”¨æ¥**æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºä¸éšè—çš„**
==v-if==
	- è¯­æ³•ï¼š`v-if="è¡¨è¾¾å¼"`ï¼Œè¡¨è¾¾å¼å€¼ä¸º *true,æ˜¾ç¤ºï¼›false,éšè—*
	- å…¶å®ƒï¼šå¯ä»¥é…åˆ ` v-else-if/v-else ` è¿›è¡Œé“¾å¼è°ƒç”¨æ¡ä»¶åˆ¤æ–­
	- åŸç†ï¼šåŸºäºæ¡ä»¶åˆ¤æ–­ï¼Œæ¥*æ§åˆ¶åˆ›å»ºæˆ–ç§»é™¤å…ƒç´ èŠ‚ç‚¹ï¼ˆæ¡ä»¶æ¸²æŸ“ï¼‰*
	- åœºæ™¯ï¼šè¦ä¹ˆæ˜¾ç¤ºï¼Œè¦ä¹ˆä¸æ˜¾ç¤ºï¼Œ*ä¸é¢‘ç¹åˆ‡æ¢çš„åœºæ™¯*
==v-show==
	- è¯­æ³•ï¼šv-show="è¡¨è¾¾å¼"ï¼Œè¡¨è¾¾å¼å€¼ä¸º *true,æ˜¾ç¤ºï¼›false,éšè—*
	- åŸç†ï¼šåŸºäº *CSS æ ·å¼ display æ¥æ§åˆ¶æ˜¾ç¤ºä¸éšè—*
	- åœºæ™¯ï¼š*é¢‘ç¹åˆ‡æ¢æ˜¾ç¤ºéšè—çš„åœºæ™¯*
```html
<body>
  <div id="app">
    v-if-æ‰‹ä¸²çš„ä»·æ ¼ä¸ºï¼š<span v-if="customer.level === 0">ï¿¥{{price}}</span>
    <span v-else-if="customer.level === 1">ï¿¥{{price+20}}</span>
    <span v-else>ï¿¥{{price+50}}</span><br>
    v-show-æ‰‹ä¸²çš„ä»·æ ¼ä¸ºï¼š<span v-show="customer.level === 0">ï¿¥{{price}}</span>
    <span v-show="customer.level === 1">ï¿¥{{price+20}}</span>
    <span v-show="customer.level >= 2">ï¿¥{{price+50}}</span>
  </div>
  <script type="module">
    import { createApp, ref, reactive } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'
    const app = createApp({
      setup () {
        const price = ref(100)
        const customer = reactive({
          name: 'å°ç‹',
          age: 18,
          level: 1
        })
        return {
          customer,
          price
        }
      }
    })
    app.mount('#app')
  </script>
  </script>
</body>
```
### 2.2.4 v-on
ä½œç”¨ï¼šä¸º html æ ‡ç­¾ç»‘å®šäº‹ä»¶
è¯­æ³•ï¼š`v-on:äº‹ä»¶å="å‡½æ•°å"`
ç®€å†™ä¸ºï¼š`@äº‹ä»¶å="å‡½æ•°å"`
> *é€‰æ‹©å¼*å‡½æ•°éœ€è¦å®šä¹‰åœ¨ methods é€‰é¡¹å†…éƒ¨ï¼Œ*ç»„åˆå¼*ç›´æ¥å®šä¹‰ç®­å¤´å‡½æ•°å¹¶ return å‡½æ•°åå³å¯ã€‚

```html
<body>
  <div id="app">
    <button type="button" v-on:click="handleClick(1)">æŒ‰é’®</button> &nbsp;
    <button type="button" @click="handleClick(2)">æŒ‰é’®</button>
  </div>
  <script type="module">
    import { createApp, ref, reactive } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'
    const app = createApp({
      setup () {
        const handleClick = (num) => {
          console.log('ä½ ç‚¹å‡»äº†æŒ‰é’®' + num)
        }
        return {
          handleClick
        }
      }
    })
    app.mount('#app')
  </script>
  </script>
</body>
```
### 2.2.5 v-model
ä½œç”¨ï¼š**åœ¨è¡¨å•å…ƒç´ ä¸Šä½¿ç”¨ï¼ŒåŒå‘æ•°æ®ç»‘å®šã€‚å¯ä»¥æ–¹ä¾¿çš„è·å–æˆ–è®¾ç½®è¡¨å•é¡¹æ•°æ®**
```html
<body>
  <div id="app">
    <form action="#app" method="get">
      <input type="text" placeholder="è¯·è¾“å…¥å§“å" v-model="queryForm.name" name="name" id="1">
      <input type="text" placeholder="è¯·è¾“å…¥å¹´é¾„" v-model="queryForm.age" name="age" id="2">
      <br>
      å½“å‰è¾“å…¥çš„å§“åï¼š{{queryForm.name}} &nbsp; å½“å‰è¾“å…¥çš„å¹´é¾„ï¼š{{queryForm.age}}
      <br>
      <button type="submit">æœç´¢</button>
      <button type="reset" @click="resetForm">é‡ç½®</button>
    </form>
    <br>
    <table border="1" width="100%" align="center" cellspacing="0" cellpadding="0">
      <thead>
        <tr style="text-align: center;">
          <th>å§“å</th>
          <th>å¹´é¾„</th>
          <th>æ€§åˆ«</th>
        </tr>
      </thead>
      <tbody style="text-align: center;">
        <tr v-for="(item,index) in objLs">
          <td>{{index}}-{{item.name}}</td>
          <td>{{index}}-{{item.age}}</td>
          <td>{{index}}-{{item.sex}}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <script type="module">
    import { createApp, ref, reactive } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'
    const app = createApp({
      setup () {
        const queryForm = ref({
          "name": "",
          "age": null
        })
        const resetForm = () => {
          queryForm.value = {
            "name": "",
            "age": null
          }
        }
        const objLs = reactive([
          {
            name: 'ruan',
            age: 12,
            sex: 'ğŸš¹'
          },
          {
            name: 'alleyf',
            age: 20,
            sex: 'ğŸš¹'
          },
        ])
        return {
          queryForm, resetForm, objLs
        }
      }
    })
    app.mount('#app')
  </script>
  </script>
</body>
```
### 2.2.6 ç”Ÿå‘½å‘¨æœŸ
æ¯ä¸ª Vue ç»„ä»¶å®ä¾‹åœ¨åˆ›å»ºæ—¶éƒ½éœ€è¦ç»å†ä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œæ¯”å¦‚è®¾ç½®å¥½æ•°æ®ä¾¦å¬ï¼Œç¼–è¯‘æ¨¡æ¿ï¼ŒæŒ‚è½½å®ä¾‹åˆ° DOMï¼Œä»¥åŠåœ¨æ•°æ®æ”¹å˜æ—¶æ›´æ–° DOMã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå®ƒä¹Ÿä¼šè¿è¡Œè¢«ç§°ä¸ºç”Ÿå‘½å‘¨æœŸé’©å­çš„å‡½æ•°ï¼Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šé˜¶æ®µè¿è¡Œè‡ªå·±çš„ä»£ç ã€‚
ç”Ÿå‘½å‘¨æœŸï¼š*æŒ‡ä¸€ä¸ªå¯¹è±¡ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹ã€‚*
ç”Ÿå‘½å‘¨æœŸçš„**å…«ä¸ªé˜¶æ®µ** ï¼šæ¯ä¸ªé˜¶æ®µä¼š*è‡ªåŠ¨æ‰§è¡Œä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆé’©å­ï¼‰ï¼Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šçš„é˜¶æ®µæ‰§è¡Œè‡ªå·±çš„ä»£ç *
![](https://cn.vuejs.org/assets/lifecycle.DLmSwRQE.png)
|      çŠ¶æ€       |  é˜¶æ®µå‘¨æœŸ  |
|:---------------:|:----------:|
| `beforeCreate`  |   åˆ›å»ºå‰   |
|  `beforeMount`  |   è½½å…¥å‰   |
| `beforeUnmount` | ç»„ä»¶é”€æ¯å‰ |
| `beforeUpdate`  | æ•°æ®æ›´æ–°å‰ |
|    `created`    |   åˆ›å»ºå   |
|    `mounted`    |  æŒ‚è½½å®Œæˆ  |
|   `unmounted`   | ç»„ä»¶é”€æ¯å |
|    `updated`    | æ•°æ®æ›´æ–°å |
ç”Ÿå‘½å‘¨æœŸå‡½æ•°ç”¨æ³•ç¤ºä¾‹ï¼š
```js
  <script type="module">
    import { createApp, ref, reactive, onMounted } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'
    const app = createApp({
      setup () {
        const mounted = ref(false)
        //å…¥å‚ä¸ºLambdaè¡¨è¾¾å¼ï¼Œå›è°ƒå‡½æ•°æ ¼å¼
        onMounted(() => {
          console.log(`ç»„ä»¶æŒ‚åœ¨å®Œæ¯•`)
        })
        return {
          mounted
        }
      }
    })
    app.mount('#app')
  </script>
```

---
### 2.2.7 axios çš„ä½¿ç”¨
ä»‹ç»ï¼šAxios å¯¹åŸç”Ÿçš„ Aja è¿›è¡Œäº†å°è£…ï¼Œç®€åŒ–ä¹¦å†™ï¼Œå¿«é€Ÿå¼€å‘ã€‚
å®˜ç½‘ï¼š https://www.axios-http.cn/
Axios ä½¿ç”¨æ­¥éª¤
- å¼•å…¥ Axios çš„ js æ–‡ä»¶ï¼ˆå‚ç…§å®˜ç½‘ï¼‰
- ä½¿ç”¨ Axios å‘é€è¯·æ±‚ï¼Œå¹¶è·å–ç›¸åº”ç»“æœ
	- method:è¯·æ±‚æ–¹å¼ï¼ŒGET/POST.
	- urL:è¯·æ±‚è·¯å¾„
	- data:è¯·æ±‚æ•›æ®

Axios-è¯·æ±‚æ–¹å¼åˆ«å
- ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼ŒAxos å·²ç»ä¸ºæ‰€æœ‰æ”¯æŒçš„è¯·æ±‚æ–¹æ³•æä¾›äº†åˆ«å
- æ ¼å¼ï¼š`axios.è¯·æ±‚æ–¹å¼(urL[,data[,config])`
	GET:
	- `axios.get(url).then((res)=>{...}).catch((err)=>{....)`
	POST:
	- `axios.post(url,data).then((res)=>{..]).catch((err)=>{....)`

```js
<script type="module">
    import { createApp, ref, reactive, onMounted } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'
    const app = createApp({
      setup () {
        axios.defaults.baseURL = 'http://127.0.0.1:8080'
        axios.defaults.headers.post['Content-Type'] = 'application/json'
        axios.defaults.crossDomain = true;
        const getAllArticle = () => axios({
          //è¯·æ±‚å‚æ•°é…ç½®
          method: 'get',
          url: '/api/article/list',
          headers: {
            'Authorization': localStorage.getItem('token')
          }
        }).then(({ data }) => {
          // æˆåŠŸå›è°ƒå‡½æ•°
          console.log(data)
        }).catch((err) => {
          // å¤±è´¥å›è°ƒå‡½æ•°
          console.log(err)
        })
        const login = () => axios({
          //è¯·æ±‚å‚æ•°é…ç½®
          method: 'post',
          url:  '/api/user/login',
          params: {
            username: 'admin',
            password: '123123'
          }
        }).then(({ data }) => {
          // æˆåŠŸå›è°ƒå‡½æ•°
          console.log(data)
          if (data.code === 200) {
            localStorage.setItem('token', data.data)
          }
        }).catch((err) => {
          // å¤±è´¥å›è°ƒå‡½æ•°
          console.log(err)
        })
        onMounted(() => {
          console.log(`ç»„ä»¶æŒ‚åœ¨å®Œæ¯•`)
          login()
          console.log(`token:${localStorage.getItem('token')}`)
          getAllArticle()
        })
        return {
          login,
          getAllArticle
        }
      }
    })
    app.mount('#app')
  </script>
```

---
## 2.3 å±€éƒ¨ä½¿ç”¨æ¡ˆä¾‹
å¯¹å¤§äº‹ä»¶åç«¯çš„æ–‡ç« åšåˆ—è¡¨å±•ç¤ºå’Œåˆ†é¡µæœç´¢åŠŸèƒ½ã€‚
```html
<body>
  <div id="app">
      <input type="text" placeholder="è¯·è¾“å…¥åˆ†ç±»id" v-model="queryForm.categoryId" name="categoryId" id="1">
      <input type="text" placeholder="è¯·è¾“å…¥å‘å¸ƒçŠ¶æ€" v-model="queryForm.state" name="state" id="2">
      <button type="submit" @click="queryArticle()">æœç´¢</button>
      <button type="reset" @click="resetForm()">é‡ç½®</button>
    <br>
    <table border="1" width="100%" align="center" cellspacing="0" cellpadding="0">
      <thead>
        <tr style="text-align: center;">
          <th>æ ‡é¢˜</th>
          <th>åˆ†ç±»</th>
          <th>å‘è¡¨æ—¶é—´</th>
          <th>çŠ¶æ€</th>
          <th>æ“ä½œ</th>
        </tr>
      </thead>
      <tbody style="text-align: center;">
        <tr v-for="(item,index) in objLs">
          <td>{{item.title}}</td>
          <td>{{item.categoryId}}</td>
          <td>{{item.createBy}}</td>
          <td>{{item.state}}</td>
          <td>
            <a href="javascript:void(0)" @click="editArticle(item.id)">ç¼–è¾‘</a>
            <b> | </b>
            <a href="javascript:void(0)" @click="delArticle(item.id)">åˆ é™¤</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <script type="module">
    import { createApp, ref, reactive, onMounted} from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'
    const app = createApp({
      setup () {
        const queryForm = ref({
          "pageNum": 1,
          "pageSize": 5,
          "categoryId": null,
          "state": null
        })
        const resetForm = () => {
          queryForm.value = {
            "pageNum": 1,
            "pageSize": 5,
            "categoryId": null,
            "state": null
          }
          getAllArticle()
        }
        const objLs = ref([])
        axios.defaults.baseURL = 'http://127.0.0.1:8080'
        axios.defaults.headers.post['Content-Type'] = 'application/json'
        axios.defaults.crossDomain = true;
        // è¯·æ±‚å‡½æ•°é…ç½®
        const getAllArticle = () => axios({
          //è¯·æ±‚å‚æ•°é…ç½®
          method: 'get',
          url: '/api/article/list',
          // headers: {
          //   'Authorization': localStorage.getItem('token')
          // }
        }).then(({ data }) => {
          // æˆåŠŸå›è°ƒå‡½æ•°
          console.log(data)
          objLs.value = data.data
        }).catch((err) => {
          // å¤±è´¥å›è°ƒå‡½æ•°
          console.log(err)
        })
        const login = () => axios({
          //è¯·æ±‚å‚æ•°é…ç½®
          method: 'post',
          url:  '/api/user/login',
          params: {
            username: 'admin',
            password: '123123'
          }
        }).then(({ data }) => {
          // æˆåŠŸå›è°ƒå‡½æ•°
          console.log(data)
          if (data.code === 200) {
            localStorage.setItem('token', data.data)
          }
        }).catch((err) => {
          // å¤±è´¥å›è°ƒå‡½æ•°
          console.log(err)
        })
        const queryArticle = () => {
          axios({
            //è¯·æ±‚å‚æ•°é…ç½®
            method: 'get',
            url: '/api/article/page',
            headers: {
              'Authorization': localStorage.getItem('token')
            },
            params: queryForm.value
          }).then(({ data }) => {
            // æˆåŠŸå›è°ƒå‡½æ•°
            console.log(data)
            objLs.value = data.data.items
          }).catch((err) => {
            // å¤±è´¥å›è°ƒå‡½æ•°
            console.log(err)
            if (err.response.status === 401) {
              alert('ç™»å½•å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•')
            }
          })
        }
        const delArticle = (id) => {
          axios({
            //è¯·æ±‚å‚æ•°é…ç½®
            method: 'delete',
            url: `/api/article/${id}`,
          }).then(({ data }) => {
            // æˆåŠŸå›è°ƒå‡½æ•°
            console.log(data)
            getAllArticle()
          }).catch((err)=>{
            // å¤±è´¥å›è°ƒå‡½æ•°
            console.log(err)
            if (err.response.status === 401) {
              alert('ç™»å½•å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•')
            }
          })
        }
        onMounted(() => {
          login()
          axios.defaults.headers['Authorization'] = localStorage.getItem('token')
          getAllArticle()
        })
        return {
          queryForm, resetForm, objLs, login, getAllArticle, queryArticle
        }
      }
    })
    app.mount('#app')
  </script>
  </script>
</body>
```

---
## 2.4 æ•´ç«™ä½¿ç”¨ Vue(å·¥ç¨‹åŒ–)
### 2.4.1 é¡¹ç›®åˆå§‹åŒ–
#### 2.4.1.1 ç¯å¢ƒå‡†å¤‡
ä»‹ç»ï¼šcreate-vue æ˜¯ Vue å®˜æ–¹æä¾›çš„æœ€æ–°çš„è„šæ‰‹æ¶å·¥å…·ï¼Œç”¨äºå¿«é€Ÿç”Ÿæˆä¸€ä¸ªå·¥ç¨‹åŒ–çš„ Vue é¡¹ç›®ã€‚
create-vue æä¾›äº†å¦‚ä¸‹åŠŸèƒ½ï¼š
> [!tip] åŠŸèƒ½
> - ç»Ÿä¸€çš„ç›®å½•ç»“æ„
> - æœ¬åœ°è°ƒè¯•
> - çƒ­éƒ¨ç½²
> - å•å…ƒæµ‹è¯•
> - é›†æˆæ‰“åŒ…

ä¾èµ–ç¯å¢ƒï¼šNodeJS

---
#### 2.4.1.2 Vue é¡¹ç›®-åˆ›å»º
åˆ›å»ºä¸€ä¸ªå·¥ç¨‹åŒ–çš„ Vue é¡¹ç›®ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š`npm init vue@latest` æˆ– `npm create vue@latest`
> [!NOTE] æ–°å»º Vue é¡¹ç›®é€‰é¡¹
> 1. Project name: ------ã€‹é¡¹ç›®åç§°ï¼Œé»˜è®¤å€¼ï¼šVu e-project,å¯è¾“å…¥æƒ³è¦çš„é¡¹ç›®åç§°ã€‚
> 2. Add TypeScript?----ã€‹æ˜¯å¦åŠ å…¥ TypeScript ç»„ä»¶ï¼Ÿé»˜è®¤å€¼ï¼šNoã€‚
> 3. Add JSX Supportï¼Ÿ-----------ã€‹æ˜¯å¦åŠ å…¥]SX æ”¯æŒï¼Ÿé»˜è®¤å€¼ï¼šNoã€‚
> 4. Add Vue Router -----ã€‹æ˜¯å¦ä¸ºå•é¡µåº”ç”¨ç¨‹åºå¼€å‘æ·»åŠ /ue Router è·¯ç”±ç®¡ç†ç»„ä»¶ï¼Ÿé»˜è®¤å€¼ï¼šNoã€‚
> 5. Add Pinia ---------------ã€‹æ˜¯å¦æ·»åŠ  inia ç»„ä»¶æ¥è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Ÿé»˜è®¤å€¼ï¼šNoã€‚
> 6. Add Vitest --------------ã€‹æ˜¯å¦æ·»åŠ /itest æ¥è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Ÿé»˜è®¤å€¼ï¼šNoã€‚
> 7. Add an End-to-End ----------------ã€‹æ˜¯å¦æ·»åŠ ç«¯åˆ°ç«¯æµ‹è¯•ï¼Ÿé»˜è®¤å€¼ Noã€‚
> 8. Add ESLint for code quality?--------------ã€‹æ˜¯å¦æ·»åŠ  ESLint æ¥è¿›è¡Œä»£ç è´¨é‡æ£€æŸ¥ï¼Ÿé»˜è®¤å€¼ï¼šNoã€‚

#### 2.4.1.3 Vue é¡¹ç›®-å®‰è£…ä¾èµ–
è¿›å…¥é¡¹ç›®ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤å®‰è£…å½“å‰é¡¹ç›®çš„ä¾èµ–ï¼š`npm install`
> [!error] æ³¨æ„
> åˆ›å»ºé¡¹ç›®ä»¥åŠå®‰è£…ä¾èµ–çš„è¿‡ç¨‹ï¼Œéƒ½æ˜¯éœ€è¦è”ç½‘çš„

#### 2.4.1.4 Vue é¡¹ç›®-å¯åŠ¨
æ‰§è¡Œå‘½ä»¤ï¼š`npm run dev` ,å°±å¯ä»¥å¯åŠ¨ vue é¡¹ç›®äº†ã€‚
![](https://qnpicmap.fcsluck.top/pics/202401031051415.png)

---
### 2.4.2 Vue é¡¹ç›®å¼€å‘æµç¨‹
#### 2.4.2.1 ç›®å½•ç»“æ„
![|250](https://qnpicmap.fcsluck.top/pics/202401031102999.png)
```vue
<script setup>
// æ•°æ®å’Œè¡Œä¸º
</script>
<template>
  <!-- éª¨æ¶å’Œå¸ƒå±€ -->
</template>
<style scoped>
/* æ ·å¼å’Œé£æ ¼ */
</style>
```

---
### 2.4.3 API é£æ ¼
Vue çš„ç»„ä»¶æœ‰ä¸¤ç§ä¸åŒçš„é£æ ¼ï¼š**ç»„åˆå¼ API å’Œé€‰é¡¹å¼ API**
> [!warning]
> - `setup`:æ˜¯ä¸€ä¸ªæ ‡è¯†ï¼Œå‘Šè¯‰ Vue éœ€è¦è¿›è¡Œä¸€äº›å¤„ç†ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ›´ç®€æ´çš„ä½¿ç”¨ç»„åˆå¼ APIã€‚
> - `ref` ():æ¥æ”¶ä¸€ä¸ªå†…éƒ¨å€¼ï¼Œè¿”å›ä¸€ä¸ªå“åº”å¼çš„ ref å¯¹è±¡ï¼Œæ­¤å¯¹è±¡åªæœ‰ä¸€ä¸ªæŒ‡å‘å†…éƒ¨å€¼çš„å±æ€§ valueã€‚
> - `onMounted` ():åœ¨ç»„åˆå¼ API ä¸­çš„é’©å­æ–¹æ³•ï¼Œæ³¨å†Œä¸€ä¸ªå›è°ƒå‡½> æ•°ï¼Œåœ¨ç»„ä»¶æŒ‚è½½å®Œæˆåæ‰§è¡Œã€‚

*ç»„åˆå¼ï¼ˆæ¨èï¼‰*ï¼š
```vue
<script setup>
import {onMounted,ref} from 'vue';
const count=ref(0);/å£°æ˜å“åº”å¼å˜é‡
function increment(){/å£°æ˜å‡½æ•°
	count value++;
}
onMounted(()=>{/å£°æ˜é’©å­å‡½æ•°
	console.log('Vue Mounted .')
})
</script>
<template>
	<button @click="increment">count:count</button>
</template>
```
é€‰é¡¹å¼ï¼š
```vue
<script>
export default {
data(){/å£°æ˜å“åº”å¼å¯¹è±¡
	return {
		count: 0
	}
},
methods:{/å£°æ˜æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ç»„ä»¶å®ä¾‹è®¿é—®
	increment:function(){
	this.count++
	}
	},
	mounted(){//å£°æ˜é’©å­å‡½æ•°
	console.log('Vue mounted ...')
	}
}
</script>
<template>
	<button @click="increment">count:{count }</button>
</template>
```
> é€‰é¡¹å¼ API,å¯ä»¥ç”¨åŒ…å«å¤šä¸ªé€‰é¡¹çš„å¯¹è±¡æ¥æè¿°ç»„ä»¶çš„é€»è¾‘ï¼Œå¦‚ï¼š`data,methods,mounted` ç­‰ã€‚

---
### 2.4.4 å®šåˆ¶ axios ä¸º request
#### 2.4.4.1 æ‹¦æˆªå™¨
åœ¨è¯·æ±‚æˆ–å“åº”è¢« then æˆ– catch å¤„ç†å‰æ‹¦æˆªå®ƒä»¬
![](https://qnpicmap.fcsluck.top/pics/202401031410386.png)
```js
// å®šåˆ¶è¯·æ±‚çš„å®ä¾‹
// å¯¼å…¥axios
import axios from 'axios'
import {ElNotification} from 'element-plus'
// å®šä¹‰è¯·æ±‚å…¬å…±å‰ç¼€,è¶…æ—¶æ—¶é—´ï¼Œè·¨åŸŸï¼Œè¯·æ±‚å¤´å’Œå®ä¾‹
const baseURL = '';
const instance = axios.create({
    baseURL: baseURL,
    timeout: 5000,
    crossDomain: true,
    headers: {
        'Authorization': localStorage.getItem('token'),
    }
})
// æ‹¦æˆªå™¨æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥éœ€è¦è¿”å›ä¸€ä¸ªpromise
// æ·»åŠ å“åº”æ‹¦æˆªå™¨
instance.interceptors.response.use(
    response => {
        // å¯¹å“åº”æ•°æ®åšäº›äº‹
        if (response.data.code === 200) {
            return response.data // ç›´æ¥è¿”å›åŒ…è£…åçš„æ•°æ®ï¼Œä¸å«å“åº”å¤´ç­‰é™„åŠ ä¿¡æ¯ã€‚
        } else {
            ElNotification({
                title: 'ç³»ç»Ÿæç¤º',
                message: response.data.message ? response.data.message : 'æœåŠ¡å¼‚å¸¸',
                type: 'error',
                duration: 3000
            });
            // å¼‚æ­¥æ“ä½œçš„çŠ¶æ€è½¬æ¢ä¸ºå¤±è´¥è¿”å›
            return Promise.reject(response.data);
        }
    },
    error => {
        // å¯¹å“åº”é”™è¯¯åšäº›äº‹ï¼Œå¼‚æ­¥çš„çŠ¶æ€è½¬åŒ–æˆå¤±è´¥çš„çŠ¶æ€
        ElNotification({
            title: 'ç³»ç»Ÿæç¤º',
            message: error.message ? error.message : 'æœåŠ¡å¼‚å¸¸',
            type: 'error',
            duration: 3000
        })
        return Promise.reject(error)
    }
)
// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨
instance.interceptors.request.use(
    config => {
        if (config.method === 'post') {
            config.headers['Content-Type'] = 'application/json'
        }
        // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
        return config
    },
    error => {
        // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
        ElNotification({
            title: 'ç³»ç»Ÿæç¤º',
            message: error.message ? error.message : 'è¯·æ±‚å¼‚å¸¸',
            type: 'error',
            duration: 3000
        })
        return Promise.reject(error)
    }
)
export default instance
```

---
#### 2.4.4.2 å„ç§è¯·æ±‚å®šåˆ¶
ä¸ä½†å¯ä»¥é¿å…ä½¿ç”¨åŒæ­¥ç­‰å¾… `awaitå’Œasync`ï¼Œå°†**å›è°ƒå‡½æ•°ä»¥å‚æ•°çš„å½¢å¼ä¼ é€’ç»™ axios çš„å›è°ƒå‡½æ•°è¿›è¡Œæ‰§è¡Œ**ã€‚è¿˜å¯ä»¥è‡ªå®šä¹‰å„ç§è¯·æ±‚ï¼Œè®¾ç½®å‚æ•°å’Œé»˜è®¤å›è°ƒå‡½æ•°ç­‰ã€‚
```js
import instance from "./request";
//getè¯·æ±‚å®šåˆ¶
function get (url, params = null, success = defaultSuccess, error = defaultError) {
  return instance({
    method: 'get',
    url: url,
    params: params
  }).then(res => success(res)).catch(err => error(err));
}
//postè¯·æ±‚å®šåˆ¶
function post (url, params = null, data = null, success = defaultSuccess, error = defaultError) {
  return instance({
    method: 'post',
    url: url,
    params: params,
    data: data
  }).then(res => success(res)).catch(err => error(err));
}
//é»˜è®¤æˆåŠŸå›è°ƒ
function defaultSuccess (response) {
  console.log(response);
}
//é»˜è®¤å¤±è´¥å›è°ƒ
function defaultError (error) {
  console.log(error);
}
export default {
  get,
  post
}
```

---
## 2.5 Element-Plus
Elementï¼šæ˜¯é¥¿äº†ä¹ˆå›¢é˜Ÿç ”å‘çš„ï¼ŒåŸºäº Vue3,é¢å‘è®¾è®¡å¸ˆå’Œå¼€å‘è€…çš„ç»„ä»¶åº“ã€‚
ç»„ä»¶ï¼šç»„æˆç½‘é¡µçš„éƒ¨ä»¶ï¼Œä¾‹å¦‚è¶…é“¾æ¥ã€æŒ‰é’®ã€å›¾ç‰‡ã€è¡¨æ ¼ã€è¡¨å•ã€åˆ†é¡µæ¡ç­‰ã€‚
å®˜ç½‘ï¼š https://element-plus.org/zh-CN/#/Zh-CN

---
### 2.5.1 å¿«é€Ÿå…¥é—¨
1. å‡†å¤‡å·¥ä½œï¼š
- åˆ›å»ºä¸€ä¸ªå·¥ç¨‹åŒ–çš„ vue é¡¹ç›®
- å‚ç…§å®˜æ–¹æ–‡æ¡£ï¼Œå®‰è£… Element Plus ç»„ä»¶åº“ï¼ˆåœ¨å½“å‰å·¥ç¨‹çš„ç›®å½•ä¸‹ï¼‰ï¼š`npm install element-plus --save`
- main.js ä¸­å¼•å…¥ Element Plus ç»„ä»¶åº“ï¼ˆå‚ç…§å®˜æ–¹æ–‡æ¡£ï¼‰
```js
import './assets/main.css'
import 'element-plus/dist/index.css'
import { createApp } from 'vue'
import ElementPlus from 'element-plus'
import App from './App.vue'
const app = createApp(App)
app.use(ElementPlus)
app.mount('#app')
```
2. åˆ¶ä½œç»„ä»¶ï¼š
è®¿é—® Element å®˜æ–¹æ–‡æ¡£ï¼Œå¤åˆ¶ç»„ä»¶ä»£ç ï¼Œè°ƒæ•´å‚æ•°è¿›è¡Œè‡ªå®šä¹‰ã€‚

---
### 2.5.2 å¸¸ç”¨ç»„ä»¶
è¡¨æ ¼ï¼Œå¡ç‰‡ï¼Œè¡¨å•ï¼ŒæŒ‰é’®ï¼Œåˆ†é¡µï¼Œä¸‹æ‹‰é€‰é¡¹æ¡†ã€‚
```vue
<template>
  <div>
    <div>
      <el-card class="box-card">
        <div class="card-header">
          <span>æ–‡ç« ç®¡ç†</span>
          <el-button type="primary" @click="addArticle">å‘å¸ƒæ–‡ç« </el-button>
        </div>
        <hr>
        <div>
          <el-form :inline="true" :model="queryForm" class="el-form">
            <el-form-item label="åˆ†ç±»">
              <el-select v-model="queryForm.categoryId" placeholder="åˆ†ç±»id" clearable>
                <el-option label="äººæ–‡" value="17" />
                <el-option label="ç§‘å­¦" value="16" />
              </el-select>
            </el-form-item>
            <el-form-item label="çŠ¶æ€">
              <el-select v-model="queryForm.state" placeholder="çŠ¶æ€" clearable>
                <el-option label="å·²å‘å¸ƒ" value="å·²å‘å¸ƒ" />
                <el-option label="è‰ç¨¿" value="è‰ç¨¿" />
              </el-select>
            </el-form-item>
            <el-form-item>
              <el-button type="primary" @click="queryArticle" :icon="Search" />
              <el-button type="warning" @click="resetForm" :icon="Loading" />
            </el-form-item>
          </el-form>
        </div>
        <div>
          <el-table :data="objLs" width="100%" row-class-name="success-row">
            <el-table-column prop="title" label="æ ‡é¢˜" />
            <el-table-column prop="categoryId" label="åˆ†ç±»" />
            <el-table-column prop="createBy" label="å‘è¡¨æ—¶é—´" />
            <el-table-column prop="state" label="çŠ¶æ€" />
            <el-table-column label="æ“ä½œ">
              <template #default="{ row }">
                <el-row>
                  <!-- <el-col :span="6"> -->
                  <el-button type="primary" disabled circle :icon="Edit" @click="editArticle(row)" />
                  <!-- </el-col> -->
                  <!-- <el-col :span="16"> -->
                  <el-button type="danger" disabled circle :icon="Delete" @click="deleteArticle(row)" />
                  <!-- </el-col> -->
                </el-row>
              </template>
            </el-table-column>
          </el-table>
        </div>
        <!-- åˆ†é¡µ -->
        <div class="el-pag">
          <el-pagination v-model:current-page="queryForm.pageNum" v-model:page-size="queryForm.pageSize"
            :page-sizes="[2, 5, 10, 20]" :small="small" :disabled="disabled" :background="background"
            layout="total,sizes, prev, pager, next,jumper" :total="total" @size-change="handleSizeChange"
            @current-change="handleCurrentChange" />
        </div>
      </el-card>
    </div>
  </div>
</template>
<script setup>
import { ref, onMounted } from 'vue'
import { Edit, Delete, Search, Loading } from '@element-plus/icons-vue'
import user from '@/api/user'
import article from '@/api/article'
/**
 * åˆ†é¡µé…ç½®
 */
const small = ref(false)
const background = ref(false)
const disabled = ref(false)
const total = ref(0)
const handleSizeChange = (val) => {
  console.log(`${val} items per page`)
}
const handleCurrentChange = (val) => {
  console.log(`current page: ${val}`)
}
/**
 * è¡¨å•é…ç½®
 */
const queryForm = ref({
  "pageNum": 1,
  "pageSize": 5,
  "categoryId": null,
  "state": null,
})
/**
 * é‡ç½®è¡¨å•
 */
const resetForm = () => {
  queryForm.value = {
    "pageNum": 1,
    "pageSize": 2,
    "categoryId": null,
    "state": null,
  }
  getAllArticle()
}
/**
 * æ–‡ç« åˆ—è¡¨
 */
const objLs = ref([
  {
    "id": 1,
    "title": "æ ‡é¢˜1",
    "categoryId": 1,
    "createBy": "admin",
    "state": 1
  },
  {
    "id": 2,
    "title": "æ ‡é¢˜2",
    "categoryId": 2,
    "createBy": "admin",
    "state": 1
  },
])
// è¯·æ±‚å‡½æ•°é…ç½®
const getAllArticle = () => {
  article.articleGetByPage(queryForm.value, res => {
    total.value = res.data.data.total
    objLs.value = res.data.data.items
  }, err => {
    if (err.status === 401) {
      alert('ç™»å½•å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•')
    }
  })
}
const login = () => {
  user.login(
    {
      username: 'admin',
      password: '123123'
    }
  )
}
const queryArticle = () => {
  article.articleGetByPage(queryForm.value, res => {
    objLs.value = res.data.data.items
  }, err => {
    if (err.status === 401) {
      alert('ç™»å½•å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•')
    }
  })
}
onMounted(() => {
  // login()
  getAllArticle()
})
</script>
<style scoped>
.card-header {
  margin: 10px 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.el-form {
  margin: 20px 0;
}
.el-pag {
  margin: 20px 0;
  display: flex;
  justify-content: flex-end;
}
.el-table .success-row {
  margin: 20px;
  --el-table-tr-bg-color: var(--el-color-success-light-9);
}
</style>
```

**ä¸‹æ‹‰é€‰é¡¹æ¡†**

```vue
<script setup>
// è·¯ç”±
const router = useRouter();
// çŠ¶æ€
const tokenStore = useTokenStore();
// ç”¨æˆ·ä¿¡æ¯
const userInfoStore = useUserInfoStore();

const logout = () => {
  ElMessageBox.confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—?',
      'æ¸©é¦¨æç¤º', {
        confirmButtonText: 'ç¡®å®š',
        cancelButtonText: 'å–æ¶ˆ',
        type: 'warning'
      }).then(() => {
    // æ¸…ç©ºä¸ªäººä¿¡æ¯å’Œtoken
    tokenStore.delToken();
    userInfoStore.removeInfo();
    // è·³è½¬åˆ°ç™»å½•é¡µé¢
    router.push('/login');
    ElMessage.success('é€€å‡ºç™»å½•æˆåŠŸ');
  }).catch(() => {
    ElMessage.info('å–æ¶ˆé€€å‡ºç™»å½•');
  });
}

// è·å–ç”¨æˆ·ä¿¡æ¯å¹¶ä¿å­˜åˆ°storeä¸­
const getUserInfo = () => {
  user.userInfoService(res => {
    userInfoStore.setInfo(res.data);
  }, err => {
    console.log(err);
  })
}

// å¤„ç†ä¸‹æ‹‰é€‰é¡¹æ¡†
const handleCommand = (command) => {
  if (command === 'logout') {
    logout();
  } else {
    router.push("/user/" + command);
  }
}
</script>


<template>
	  <el-dropdown placement="bottom-end" @command="handleCommand">
                    <span class="el-dropdown__box">
                        <el-avatar :src="userInfoStore.info.userPic || userInfoStore.defaultAvatar || avatar"/>
                        <el-icon>
                            <CaretBottom/>
                        </el-icon>
                    </span>
          <template #dropdown>
            <el-dropdown-menu class="el-dropdown-menu--right">
              <el-dropdown-item :icon="User" command="info">åŸºæœ¬èµ„æ–™</el-dropdown-item>
              <el-dropdown-item :icon="Crop" command="avatar">æ›´æ¢å¤´åƒ</el-dropdown-item>
              <el-dropdown-item :icon="EditPen" command="resetPsd">é‡ç½®å¯†ç </el-dropdown-item>
              <el-dropdown-item :icon="SwitchButton" command="logout">é€€å‡ºç™»å½•</el-dropdown-item>
            </el-dropdown-menu>
          </template>
        </el-dropdown>
</template>
```

> `el-dropdown-item` æ ‡ç­¾çš„ `command` å±æ€§å°±æ˜¯ä¼ é€’ç»™`@command`å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œå¯¹å‚æ•°è¿›è¡Œåˆ¤æ–­è¿›è¡Œä¸åŒå¤„ç†ã€‚

---
# 3 é»‘é©¬å¤§äº‹ä»¶-å‰ç«¯
## 3.1 ç¯å¢ƒå‡†å¤‡
1. åˆ›å»º Vue å·¥ç¨‹
`npm init vue@latest`
2. å®‰è£…ä¾èµ–
- Element-Plus
`npm install element-plus --save`
- Axios
`npm install axios`
- Sass
`npm install sass -D`
3. ç›®å½•è°ƒæ•´
- åˆ é™¤ components ä¸‹é¢è‡ªåŠ¨ç”Ÿæˆçš„å†…å®¹
- æ–°å»ºç›®å½• `apiã€utilsã€views`
- å°†èµ„æ–™ä¸­çš„é™æ€èµ„æºæ‹·è´åˆ° assets ç›®å½•ä¸‹
- åˆ é™¤ App.vue ä¸­è‡ªåŠ¨ç”Ÿæˆçš„å†…å®¹

---
## 3.2 ç»†èŠ‚è¦ç‚¹
### 3.2.1 è¡¨å•æ ¡éªŒ
- æ•°æ®ç»‘å®š
å‚è€ƒæ¥å£æ–‡æ¡£ç»™å±æ€§èµ·å
- è¡¨å•æ ¡éªŒ
`el-form ` æ ‡ç­¾ä¸Šé€šè¿‡ `rules` å±æ€§ï¼Œç»‘å®šæ ¡éªŒè§„åˆ™
`el-form-item ` æ ‡ç­¾ä¸Šé€šè¿‡ `prop` å±æ€§ï¼ŒæŒ‡å®šæ ¡éªŒé¡¹
```js
//è‡ªå®šä¹‰å­—æ®µæ ¡éªŒå™¨
const rePasswordValid = (rule, value, callback) => {
  if (value == null || value === '') {
    return callback(new Error('è¯·å†æ¬¡ç¡®è®¤å¯†ç '))
  }
  if (registerData.value.password !== value) {
    return callback(new Error('ä¸¤æ¬¡è¾“å…¥å¯†ç ä¸ä¸€è‡´'))
  }
  callback()
};
//ç”¨äºæ³¨å†Œçš„è¡¨å•æ ¡éªŒæ¨¡å‹
const registerDataRules = reactive({
  username: [
    {required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å', trigger: 'blur'},
    {min: 4, max: 16, message: 'ç”¨æˆ·åçš„é•¿åº¦å¿…é¡»ä¸º4~16ä½', trigger: 'blur'}
  ],
  password: [
    {required: true, message: 'è¯·è¾“å…¥å¯†ç ', trigger: 'blur'},
    {min: 4, max: 16, message: 'å¯†ç é•¿åº¦å¿…é¡»ä¸º4~16ä½', trigger: 'blur'}
  ],
  rePassword: [
    {validator: rePasswordValid, trigger: 'blur'}
  ]
});
```
- è¯·æ±‚æ ¡éªŒ
*å¯¹æäº¤çš„è¡¨å•æ•°æ®éœ€è¦å…ˆè¿›è¡ŒéªŒè¯æ•°æ®æœ‰æ•ˆæ€§å†å‘èµ·è¯·æ±‚*ã€‚
```js
import {User, Lock} from '@element-plus/icons-vue'  
import {reactive, ref} from 'vue'  
import {ElMessage} from "element-plus";  
import user from '@/api/user'  
//æ§åˆ¶æ³¨å†Œä¸ç™»å½•è¡¨å•çš„æ˜¾ç¤ºï¼Œ é»˜è®¤æ˜¾ç¤ºæ³¨å†Œ  
const isRegister = ref(false);  
// å®šä¹‰æ•°æ®æ¨¡å‹ 
const form = ref()  
const registerData = ref({  
  username: '',  
  password: '',  
  rePassword: ''  
});  
//è‡ªå®šä¹‰ç¡®è®¤å¯†ç çš„æ ¡éªŒå™¨ 
const rePasswordValid = (rule, value, callback) => {  
  if (value == null || value === '') {  
    return callback(new Error('è¯·å†æ¬¡ç¡®è®¤å¯†ç '))  
  }  
  if (registerData.value.password !== value) {  
    return callback(new Error('ä¸¤æ¬¡è¾“å…¥å¯†ç ä¸ä¸€è‡´'))  
  }  
  callback()  
};  
//ç”¨äºæ³¨å†Œçš„è¡¨å•æ ¡éªŒæ¨¡å‹  
const registerDataRules = reactive({  
  username: [  
    {required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å', trigger: 'blur'},  
    {min: 4, max: 16, message: 'ç”¨æˆ·åçš„é•¿åº¦å¿…é¡»ä¸º4~16ä½', trigger: 'blur'}  
  ],  
  password: [  
    {required: true, message: 'è¯·è¾“å…¥å¯†ç ', trigger: 'blur'},  
    {min: 4, max: 16, message: 'å¯†ç é•¿åº¦å¿…é¡»ä¸º4~16ä½', trigger: 'blur'}  
  ],  
  rePassword: [  
    {validator: rePasswordValid, trigger: 'blur'}  
  ]  
});  
// è¡¨å•æ•°æ®æäº¤äº‹ä»¶
const register = () => {  
  // è¡¨å•æ ¡éªŒ  
  form.value.validate((valid) => {  
    if (valid) {  
      user.registerService(registerData.value, res => {  
        alert(JSON.stringify(res))  
        if (res.code === 200) {  
          ElMessage.success('æ³¨å†ŒæˆåŠŸ')  
        } else {  
          ElMessage.error('æ³¨å†Œå¤±è´¥:' + res.message)  
        }  
      }, err => {  
        console.log(err)  
        ElMessage.error('ç³»ç»Ÿå†…éƒ¨å‘ç”Ÿé”™è¯¯')  
      })  
    }  
    return false  
  })  
};
//è¡¨å•æ•°æ®é‡ç½®äº‹ä»¶
const resetForm = (formEl) => {
  if (!formEl) return
  formEl.resetFields()
}
```
### 3.2.2 è·¨åŸŸå¤„ç†
ç”±äºæµè§ˆå™¨çš„åŒæºç­–ç•¥é™åˆ¶ï¼Œå‘ä¸åŒæºï¼ˆ**ä¸åŒåè®®ã€ä¸åŒåŸŸåã€ä¸åŒç«¯å£**ï¼‰å‘é€ ajax è¯·æ±‚ä¼šå¤±è´¥ï¼Œè§£å†³åŠæ³•ä¸€èˆ¬é€šè¿‡ä»£ç†å®ç°ã€‚
åç«¯æ¥å£è·¯å¾„æ ¼å¼ä¸ºï¼š 
eg:
1. http://localhost:8080/user/register
2. http://localhost:8080/api/user/register

> [!WARNING] æ³¨æ„
> - ç¬¬ä¸€ç§ baseURL ä¸­éœ€è¦æ·»åŠ  apiï¼Œå¹¶ä¸”åœ¨ä»£ç†é…ç½®å¤„éœ€è¦é‡å†™è¯·æ±‚è·¯å¾„ã€‚
> - ç¬¬äºŒç§ baseURL ä¸­ä¸éœ€è¦æ·»åŠ  apiï¼Œå› ä¸ºåç«¯æ¥å£è‡ªå¸¦äº† apiï¼Œä¹Ÿä¸éœ€è¦é‡å†™è¯·æ±‚è·¯å¾„ã€‚

`request.js ` é…ç½®ï¼š
```js
import axios from 'axios';
const baseURL = '/api'; //ç¬¬ä¸€ç§
const baseURL =  ''; //ç¬¬äºŒç§
const instance axios.create({baseURL})
```
`vite.config.js` é…ç½®ï¼š
```js
server: {  
    proxy: {  
        // é…ç½®è·¨åŸŸï¼Œè·å–è¯·æ±‚è·¯å¾„ä¸­åŒ…å«äº†apiçš„æ¥å£  
        '/api': {  
            target: 'http://localhost:8080', // åç«¯æ¥å£æºï¼Œä»£ç†ç›®æ ‡çš„åŸºç¡€è·¯å¾„  
            changeOrigin: true, //ä¿®æ”¹æº  
            // rewrite: (path) => path.replace(/^\/api/, '') //åç«¯è‡ªå¸¦äº†apiè·¯å¾„ï¼Œæ— éœ€é‡å†™  
        }  
    }  
}
```

---
### 3.2.3 æœªç™»å½•ç»Ÿä¸€å¤„ç†
> å¯¹*æœªç™»å½•æˆ–è€… token è¿‡æœŸ*ç­‰å“åº”å¼‚å¸¸æƒ…å†µè¿›è¡Œç»Ÿä¸€å¤„ç†è·³è½¬åˆ°ç™»å½•é¡µã€‚

```js
// æ·»åŠ å“åº”æ‹¦æˆªå™¨
instance.interceptors.response.use(
    response => {
        // å¯¹å“åº”æ•°æ®åšäº›äº‹
        // console.log(response.data)
        // å¼‚æ­¥æ“ä½œçš„çŠ¶æ€è½¬æ¢ä¸ºæˆåŠŸè¿”å›
        if (response.data.code === 200) {
            return response.data // ç›´æ¥è¿”å›åŒ…è£…åçš„æ•°æ®ï¼Œä¸å«å“åº”å¤´ç­‰é™„åŠ ä¿¡æ¯ã€‚
        } else {
            // å¼‚æ­¥æ“ä½œçš„çŠ¶æ€è½¬æ¢ä¸ºå¤±è´¥è¿”å›
            ElNotification.error(response.data.message ? response.data.message : 'æœåŠ¡å¼‚å¸¸');
            return Promise.reject(response.data);
        }
    },
    error => {
        // åˆ¤æ–­çŠ¶æ€ç 
        const errorMessages = {
            401: 'æœªç™»å½•',
            403: 'æ— æƒé™',
            404: 'èµ„æºä¸å­˜åœ¨',
            500: 'æœåŠ¡å™¨å†…éƒ¨å¼‚å¸¸',
        };
        // æ ¹æ®çŠ¶æ€ç ï¼Œè¿”å›å¯¹åº”çš„é”™è¯¯ä¿¡æ¯
        const errorMessage = errorMessages[error.response.status] || 'æœªçŸ¥é”™è¯¯';
        ElNotification.error(errorMessage);
        if (error.response.status) {
            router.push({path: '/login'})
        }
        return Promise.reject(error);
    }
)
```
*å¯¹ token è¿‡æœŸçš„è·¯ç”±è·³è½¬æ—¶è¿›è¡Œå¼‚å¸¸å¤„ç†è·¯ç”±å‰åˆ¤æ–­ token å†³å®šæ˜¯å¦æ”¾è¡Œ*ï¼š
```js
router.beforeEach((to, from, next) => {
    const tokenStore = useTokenStore();
    // ç›´æ¥æ”¾è¡Œç™»å½•å’Œæ³¨å†Œé¡µ
    if (to.path === '/login' || to.path === '/register') return next()
    // åˆ¤æ–­æ˜¯å¦ç™»å½•å«æœ‰tokenï¼Œæœ‰ï¼šæ”¾è¡Œï¼Œæ²¡æœ‰ï¼šè·³è½¬åˆ°ç™»å½•é¡µ
    if (tokenStore.token !== '') {
        next()
    } else {
        ElMessage.error('è¯·å…ˆç™»å½•')
        return router.push('/login')
    }
})
```

---
### 3.2.4 ä¸€å¯¹å¤šå…³ç³»å‰ç«¯ id è½¬ä¹‰
å¯¹äºå“åº”æ•°æ®ä¸­å­˜åœ¨å…³è”idæ•°æ®éœ€è¦è½¬åŒ–ä¸ºå¯¹åº”è¡¨idè¡Œçš„æ•°æ®è¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼Œé‡‡ç”¨ä»¥ä¸‹åµŒå¥—å¾ªç¯å¤„ç†çš„æ–¹æ³•è¿›è¡Œï¼š
```js
const getAllArticle = () => {
  // è·å–åˆ†é¡µæ•°æ®ï¼Œæ•°æ®ä¸­çš„åˆ†ç±»æ˜¯idçš„å½¢å¼å­˜åœ¨
  article.articleGetByPage(queryForm.value, res => {
    total.value = res.data.total
    articleLs.value = res.data.items
    // å¤„ç†æ•°æ®å¯¹åˆ†ç±»idè¿›è¡Œè½¬ä¹‰ä¸ºåˆ†ç±»åç§°
    for (let i = 0; i < articleLs.value.length; i++) {
      for (let j = 0; j < categorys.value.length; j++) {
        if (articleLs.value[i].categoryId === categorys.value[j].id) {
          articleLs.value[i].categoryName = categorys.value[j].categoryName
        }
      }
    }
  }, err => {
    if (err.status === 401) {
      alert('ç™»å½•å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•')
    }
  })
}
```
### 3.2.5 å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
æ–‡ç« å†…å®¹éœ€è¦ä½¿ç”¨åˆ°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œè¿™é‡Œå’±ä»¬ä½¿ç”¨ä¸€ä¸ªå¼€æºçš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ Quillï¼›é™¤æ­¤ä»¥å¤–è¿˜æœ‰tinymceï¼ˆå¸¸ç”¨ï¼‰ã€‚
å®˜ç½‘åœ°å€ï¼š https://vueup.github.io/vue-quill/
**å®‰è£…ï¼š**
```js
npm install @vueup/vue-quill@latest --save
```
**å¯¼å…¥ç»„ä»¶å’Œæ ·å¼ï¼š**
```js
import { QuillEditor } from '@vueup/vue-quill'
import '@vueup/vue-quill/dist/vue-quill.snow.css'
```
**é¡µé¢é•¿ä½¿ç”¨quillç»„ä»¶ï¼š**
```html
<quill-editor
              theme="snow"
              v-model:content="articleModel.content"
              contentType="html"
              >
</quill-editor>
```
**æ ·å¼ç¾åŒ–ï¼š**
```css
.editor {
  width: 100%;
  :deep(.ql-editor) {
    min-height: 200px;
  }
}
```
### 3.2.6 å›¾ç‰‡ä¸Šä¼ 
å°†æ¥å½“ç‚¹å‡»+å›¾æ ‡ï¼Œé€‰æ‹©æœ¬åœ°å›¾ç‰‡åï¼Œel-uploadè¿™ä¸ªç»„ä»¶ä¼šè‡ªåŠ¨å‘é€è¯·æ±‚ï¼ŒæŠŠå›¾ç‰‡ä¸Šä¼ åˆ°æŒ‡å®šçš„æœåŠ¡å™¨ä¸Šï¼Œè€Œä¸éœ€è¦æˆ‘ä»¬è‡ªå·±ä½¿ç”¨axioså‘é€å¼‚æ­¥è¯·æ±‚ï¼Œæ‰€ä»¥éœ€è¦ç»™el-uploadæ ‡ç­¾æ·»åŠ ä¸€äº›å±æ€§ï¼Œæ§åˆ¶è¯·æ±‚çš„å‘é€

> [!tip] el-uploadå±æ€§
> - auto-upload:æ˜¯å¦è‡ªåŠ¨ä¸Šä¼ 
> - action: æœåŠ¡å™¨æ¥å£è·¯å¾„
> - name: ä¸Šä¼ çš„æ–‡ä»¶å­—æ®µå
> - headers: è®¾ç½®ä¸Šä¼ çš„è¯·æ±‚å¤´
> - on-success: ä¸Šä¼ æˆåŠŸçš„å›è°ƒå‡½æ•°





### 3.2.7 





---
## 3.3 è·¯ç”±ç®¡ç†ï¼ˆvue-routerï¼‰
> [!tip] Vue Router
> 1. å®‰è£… vue-router `npm install vue-router@4`
> 2. åœ¨ `src/router/index.js ` ä¸­åˆ›å»ºè·¯ç”±å™¨ï¼Œå¹¶å¯¼å‡º
> 3. åœ¨ vue åº”ç”¨å®ä¾‹ä¸­ä½¿ç”¨ `vue-route`
> 4. å£°æ˜ `router-view` æ ‡ç­¾ï¼Œå±•ç¤ºç»„ä»¶å†…å®¹

1. *è·¯ç”±å…³ç³»å’Œè·¯ç”±å™¨å®šä¹‰ index.js:*
```js
import {createRouter, createWebHistory} from 'vue-router'  
// åœ¨componentå¤„åŠ¨æ€å¯¼å…¥ç»„ä»¶  
// å®šä¹‰è·¯ç”±å…³ç³»  
const routes = [  
    {  
        path: '/',  
        component: () => import("@/views/Layout.vue"),  
    },  
    {  
        path: '/login',  
        component: () => import("@/views/Login.vue"),  
    }]  
// åˆ›å»ºè·¯ç”±  
const router = createRouter({  
    history: createWebHistory(),  
    routes: routes  
})  
// å¯¼å‡ºè·¯ç”±  
export default router
```
2. *main.js å…¥å£æ–‡ä»¶ä½¿ç”¨è·¯ç”±ï¼š*
```js
import './assets/main.scss'  
import 'element-plus/dist/index.css'  
import zhCn from 'element-plus/dist/locale/zh-cn.mjs'  
import {createApp} from 'vue'  
import ElementPlus from 'element-plus'  
import router from '@/router'  
import App from './App.vue'  
const app = createApp(App)  
app.use(ElementPlus, {locale: zhCn})  
app.use(router)  
app.mount('#app')
```
3. *app.vue æ ¹ç»„ä»¶æ¸²æŸ“è·¯ç”±ï¼š*
```vue
<script setup>
// æ•°æ®å’Œè¡Œä¸º
</script>
<template>
  <router-view/>
</template>
<style scoped>
/* æ ·å¼å’Œé£æ ¼ */
</style>
```
4. *è·¯ç”±åˆ‡æ¢ï¼š*
```js
import {useRouter} from "vue-router";
// è·¯ç”±  
const router = useRouter();
router.push({path: '/'})
```
### 3.3.1 å­è·¯ç”±
é…ç½®å­è·¯ç”±
- å®šä¹‰å­è·¯ç”±å…³ç³»
- å£°æ˜ `router-view` æ ‡ç­¾
- ä¸ºèœå•é¡¹ ` el-menu-item è®¾ç½® index å±æ€§`ï¼Œè®¾ç½®ç‚¹å‡»åçš„è·¯ç”±è·¯å¾„

1. *å­è·¯ç”±é…ç½®ï¼ˆåŒ…æ‹¬è·¯å¾„ï¼Œé‡å®šå‘ï¼Œç»„ä»¶ï¼Œå­è·¯ç”±ç­‰ä¿¡æ¯ï¼‰ï¼š*
```js
// å®šä¹‰è·¯ç”±å…³ç³»
const routes = [
    {
        path: '/',
        redirect: '/article/category',
        component: () => import("@/views/Layout.vue"),
        children: [
            {
                path: 'article/category', component: () => import("@/views/article/ArticleCategory.vue"),
            },
            {
                path: 'article/manage',
                component: () => import("@/views/article/ArticleManage.vue"),
            },
            {
                path: 'user/',
                redirect: '/user/info',
                children: [
                    {
                        name: 'userInfo',
                        path: 'info',
                        component: () => import("@/views/user/UserInfo.vue"),
                    },
                    {
                        path: 'avatar',
                        component: () => import("@/views/user/UserAvatar.vue"),
                    },
                    {
                        path: 'resetPsd',
                        component: () => import("@/views/user/UserResetPassword.vue"),
                    }
                ]
            },
        ]
    },
    {
        path: '/login',
        component: () => import("@/views/Login.vue"),
    }]
```
2. *èœå•è®¾ç½® `index` å±æ€§ï¼Œå€¼ä¸ºè·¯ç”±åœ°å€*
```vue
      <el-menu active-text-color="#ffd04b" background-color="#232323" router
               text-color="#fff">
        <el-menu-item index="/article/category">
          <el-icon>
            <Management/>
          </el-icon>
          <span>æ–‡ç« åˆ†ç±»</span>
        </el-menu-item>
        <el-menu-item index="/article/manage">
          <el-icon>
            <Promotion/>
          </el-icon>
          <span>æ–‡ç« ç®¡ç†</span>
        </el-menu-item>
        <el-sub-menu index="/user">
          <template #title>
            <el-icon>
              <UserFilled/>
            </el-icon>
            <span>ä¸ªäººä¸­å¿ƒ</span>
          </template>
          <el-menu-item index="/user/info">
            <el-icon>
              <User/>
            </el-icon>
            <span>åŸºæœ¬èµ„æ–™</span>
          </el-menu-item>
          <el-menu-item index="/user/avatar">
            <el-icon>
              <Crop/>
            </el-icon>
            <span>æ›´æ¢å¤´åƒ</span>
          </el-menu-item>
          <el-menu-item index="/user/resetPsd">
            <el-icon>
              <EditPen/>
            </el-icon>
            <span>é‡ç½®å¯†ç </span>
          </el-menu-item>
        </el-sub-menu>
      </el-menu>
```
3. *åœ¨éœ€è¦æ˜¾ç¤ºè·¯ç”±ç»„ä»¶çš„åŒºåŸŸæ”¾ç½® `router-view` æ ‡ç­¾*

```vue
      <!-- ä¸­é—´åŒºåŸŸ -->
      <el-main>
        <div style="width: 1290px; height: 570px;border: 1px solid red;">
          <router-view/>
        </div>
      </el-main>
```

---
## 3.4 çŠ¶æ€ç®¡ç†ï¼ˆPiniaï¼‰
Pinia æ˜¯ Vue çš„ä¸“å±çŠ¶æ€ç®¡ç†åº“ï¼Œ**å®ƒå…è®¸ä½ è·¨ç»„ä»¶æˆ–é¡µé¢å…±äº«çŠ¶æ€**
![|500](https://qnpicmap.fcsluck.top/pics/202401041542095.png)
> [!tip] pinia ç”¨æ³•
> 1. å®‰è£… piniaï¼Œ` npm install pinia`
> 2. åœ¨ **vue åº”ç”¨å®ä¾‹ä¸­ä½¿ç”¨ pinia**
> 3. åœ¨ `src/stores/token.js` ä¸­*å®šä¹‰ store*
> 4. åœ¨**ç»„ä»¶ä¸­ä½¿ç”¨ store**

![|500](https://qnpicmap.fcsluck.top/pics/202401041550760.png)
ç”¨æ³•è¯¦æƒ…ï¼š
1. *å°† pinia æŒ‚è½½åˆ° app ä¸­ï¼š*
```js
import {createApp} from 'vue'  
import {createPinia} from "pinia";  
import App from './App.vue'  
const app = createApp(App)  
const pinia = createPinia();  
app.use(pinia)
app.mount('#app')
```
2. *åœ¨ store æ–‡ä»¶å¤¹ä¸‹å®šä¹‰ storeï¼š*
```js
//å¯¼å…¥pinia
import {defineStore} from "pinia";
import {ref} from "vue";
/**
 * å®šä¹‰çŠ¶æ€
 * ç¬¬ä¸€ä¸ªå‚æ•°ï¼šåå­—ï¼Œå”¯ä¸€æ€§
 * ç¬¬äºŒä¸ªå‚æ•°ï¼šå‡½æ•°ï¼Œå‡½æ•°çš„å†…éƒ¨å¯ä»¥å®šä¹‰çŠ¶æ€çš„æ‰€æœ‰å†…å®¹
 * è¿”å›å€¼ï¼šå‡½æ•°
 * @type {StoreDefinition<"token", {token: string}, {}, {setToken(*): void}>}
 */
// export const useTokenStore = defineStore('token', {
//     // å®šä¹‰çŠ¶æ€,å¯ä»¥è®¾ç½®é»˜è®¤åˆå€¼
//     state: () => ({token: ''}),
//     // å®šä¹‰å¯¹çŠ¶æ€çš„æ“ä½œï¼ˆä¿®æ”¹ï¼Œåˆ é™¤ï¼Œè·å–Â·Â·Â·ï¼‰
//     actions: {
//         setToken(token) {
//             this.token = token
//         },
//         delToken() {
//             this.token = ''
//         }
//     }
// })
export const useTokenStore = defineStore('token', () => {
        // 1.å®šä¹‰çŠ¶æ€,å¯ä»¥è®¾ç½®é»˜è®¤åˆå€¼
        const token = ref('')
        // 2.å®šä¹‰å¯¹çŠ¶æ€çš„æ“ä½œï¼ˆä¿®æ”¹ï¼Œåˆ é™¤ï¼Œè·å–Â·Â·Â·ï¼‰
        // 2.1ä¿®æ”¹token
        const setToken = (newToken) => {
            token.value = newToken
        }
        // 2.2åˆ é™¤token
        const delToken = () => {
            token.value = ''
        }
        return {
            token, setToken, delToken
        }
    }
)
```
3. *ä½¿ç”¨å®šä¹‰çš„ storeï¼š*
```js
import {useTokenStore} from "@/stores/token.js";
const tokenStore = useTokenStore();
tokenStore.token //è·å–token
tokenStore.setToken(newToken) //ä¿®æ”¹token
tokenStore.delToken() //åˆ é™¤/é‡ç½® token
```
### 3.4.1 axios è¯·æ±‚æ‹¦æˆªå™¨
åœ¨ axios çš„è¯·æ±‚å‰æ‹¦æˆªå™¨ä¸­ç»Ÿä¸€åœ¨è¯·æ±‚å¤´æ·»åŠ  token ä¾¿äºåç»­æ¥å£è®¤è¯ã€‚
```js
// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨
instance.interceptors.request.use(
    config => {
        // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
        let tokenStore = useTokenStore();
        console.log("tokenï¼š" + tokenStore.token)
        if ((config.url !== '/user/login' || config.url !== '/user/register') && tokenStore.token) {
            config.headers.Authorization = tokenStore.token
        }
        if (config.method === 'post') {
            config.headers['Content-Type'] = 'application/json'
        }
        return config
    },
    error => {
        // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
        ElNotification.error(error.message ? error.message : 'è¯·æ±‚å¼‚å¸¸');
        Promise.reject(error)
    }
)
```
---
### 3.4.2 Pinia æŒä¹…åŒ–æ’ä»¶-persist
**Pinia é»˜è®¤æ˜¯å†…å­˜å­˜å‚¨ï¼Œå½“åˆ·æ–°æµè§ˆå™¨çš„æ—¶å€™ä¼šä¸¢å¤±æ•°æ®**ã€‚
`Persist` æ’ä»¶å¯ä»¥å°† pinia ä¸­çš„**æ•°æ®æŒä¹…åŒ–çš„å­˜å‚¨**ã€‚
> [!tip] æ’ä»¶ä½¿ç”¨
> 1. persist:`npm install pinia-persistedstate-plugin`
> 2. *åœ¨ piniat ä¸­ä½¿ç”¨ persist*
> 3. *å®šä¹‰çŠ¶æ€ Store æ—¶æŒ‡å®šæŒä¹…åŒ–é…ç½®å‚æ•°*
å…·ä½“ä½¿ç”¨è¯¦æƒ…ï¼š
1. *å¯¼å…¥æŒä¹…åŒ–æ’ä»¶ï¼Œpinia ä½¿ç”¨è¯¥æ’ä»¶ï¼š*
```js
import {createPinia} from "pinia";  
const persist = createPersistedState()
pinia.use(persist)  
app.use(pinia)
```
2. *é…ç½® defineStore çš„é…ç½®é¡¹å¼€å¯æŒä¹…åŒ–ï¼š*
```js
export const useTokenStore = defineStore('token', () => {
        // 1.å®šä¹‰çŠ¶æ€,å¯ä»¥è®¾ç½®é»˜è®¤åˆå€¼
        const token = ref('')
        // 2.å®šä¹‰å¯¹çŠ¶æ€çš„æ“ä½œï¼ˆä¿®æ”¹ï¼Œåˆ é™¤ï¼Œè·å–Â·Â·Â·ï¼‰
        // 2.1 ä¿®æ”¹ token
        const setToken = (newToken) => {
            token.value = newToken
        }
        // 2.2 åˆ é™¤ token
        const delToken = () => {
            token.value = ''
        }
        return {
            token, setToken, delToken
        }
    },
    {
        persist: true //å¼€å¯çŠ¶æ€æŒä¹…åŒ–
    }
)
```

---
## 3.5 æˆæœå±•ç¤º

<div>
<p style="display: flex;" align="center">
<img style="width: 50%;" src="https://qnpicmap.fcsluck.top/pics/202401061355682.png" alt="Image 1">
    <img style="width: 50%;" src="https://qnpicmap.fcsluck.top/pics/202401061353941.png" alt="Image 2"> 
</p>

<p style="display: flex;" align="center">
<img style="width: 50%;" src="https://qnpicmap.fcsluck.top/pics/202401061356590.png" alt="Image 1">
    <img style="width: 50%;" src="https://qnpicmap.fcsluck.top/pics/202401061357999.png" alt="Image 2"> 
</p>

<p style="display: flex;" align="center">
<img style="width: 50%;" src="https://qnpicmap.fcsluck.top/pics/202401061359410.png" alt="Image 1">
    <img style="width: 50%;" src="https://qnpicmap.fcsluck.top/pics/202401061354581.png" alt="Image 2"> 
</p>

<p style="display: flex;" align="center">
<img style="width: 50%;" src="https://qnpicmap.fcsluck.top/pics/202401061359816.png" alt="Image 1">
    <img style="width: 50%;" src="https://qnpicmap.fcsluck.top/pics/202401061400968.png" alt="Image 2"> 
</p>
</div>


---
# 4 å‚è€ƒ
1. [å®æˆ˜ç¯‡-38\_vueæŒ‡ä»¤\_v-bind\_å“”å“©å“”å“©\_bilibili](https://www.bilibili.com/video/BV14z4y1N7pg/?p=50&spm_id_from=pageDriver&vd_source=9c896fa9c3f9023797e8efe7be0c113e)
2. [Javaç¨‹åºå‘˜ç”¨å­¦å‰ç«¯ä¹ˆï¼Ÿjavaå¼€å‘æ‰€éœ€çš„å‰ç«¯æŠ€æœ¯å…¨æ•™ç¨‹ï¼ˆHTML/CSS/js/vue2/vue3/reactï¼‰\_å“”å“©å“”å“©\_bilibili](https://www.bilibili.com/video/BV1Tt4y1772f/?vd_source=9c896fa9c3f9023797e8efe7be0c113e)
3. [å¿«é€Ÿä¸Šæ‰‹ | Vue.js](https://cn.vuejs.org/guide/quick-start.html#using-vue-from-cdn)
4. [javascriptä¸­...çš„ç”¨æ³•\_jsä¸­...-CSDNåšå®¢](https://blog.csdn.net/cutgod/article/details/131928143)
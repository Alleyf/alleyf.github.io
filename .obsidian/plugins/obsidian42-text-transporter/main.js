var yn=Object.create;var wt=Object.defineProperty;var vn=Object.getOwnPropertyDescriptor;var wn=Object.getOwnPropertyNames;var bn=Object.getPrototypeOf,xn=Object.prototype.hasOwnProperty;var kn=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Tn=(t,e)=>{for(var o in e)wt(t,o,{get:e[o],enumerable:!0})},zo=(t,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of wn(e))!xn.call(t,n)&&n!==o&&wt(t,n,{get:()=>e[n],enumerable:!(r=vn(e,n))||r.enumerable});return t};var Pn=(t,e,o)=>(o=t!=null?yn(bn(t)):{},zo(e||!t||!t.__esModule?wt(o,"default",{value:t,enumerable:!0}):o,t)),Sn=t=>zo(wt({},"__esModule",{value:!0}),t);var fr=kn(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var O=require("obsidian"),Ut="YYYY-MM-DD",zt="gggg-[W]ww",Zo="YYYY-MM",er="YYYY-[Q]Q",tr="YYYY";function Ue(t){var o,r;let e=window.app.plugins.getPlugin("periodic-notes");return e&&((r=(o=e.settings)==null?void 0:o[t])==null?void 0:r.enabled)}function ze(){var t,e,o,r;try{let{internalPlugins:n,plugins:i}=window.app;if(Ue("daily")){let{format:p,folder:c,template:u}=((e=(t=i.getPlugin("periodic-notes"))==null?void 0:t.settings)==null?void 0:e.daily)||{};return{format:p||Ut,folder:(c==null?void 0:c.trim())||"",template:(u==null?void 0:u.trim())||""}}let{folder:s,format:a,template:l}=((r=(o=n.getPluginById("daily-notes"))==null?void 0:o.instance)==null?void 0:r.options)||{};return{format:a||Ut,folder:(s==null?void 0:s.trim())||"",template:(l==null?void 0:l.trim())||""}}catch(n){console.info("No custom daily note settings found!",n)}}function qe(){var t,e,o,r,n,i,s;try{let a=window.app.plugins,l=(t=a.getPlugin("calendar"))==null?void 0:t.options,p=(o=(e=a.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:o.weekly;if(Ue("weekly"))return{format:p.format||zt,folder:((r=p.folder)==null?void 0:r.trim())||"",template:((n=p.template)==null?void 0:n.trim())||""};let c=l||{};return{format:c.weeklyNoteFormat||zt,folder:((i=c.weeklyNoteFolder)==null?void 0:i.trim())||"",template:((s=c.weeklyNoteTemplate)==null?void 0:s.trim())||""}}catch(a){console.info("No custom weekly note settings found!",a)}}function Qe(){var e,o,r,n;let t=window.app.plugins;try{let i=Ue("monthly")&&((o=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:o.monthly)||{};return{format:i.format||Zo,folder:((r=i.folder)==null?void 0:r.trim())||"",template:((n=i.template)==null?void 0:n.trim())||""}}catch(i){console.info("No custom monthly note settings found!",i)}}function Ge(){var e,o,r,n;let t=window.app.plugins;try{let i=Ue("quarterly")&&((o=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:o.quarterly)||{};return{format:i.format||er,folder:((r=i.folder)==null?void 0:r.trim())||"",template:((n=i.template)==null?void 0:n.trim())||""}}catch(i){console.info("No custom quarterly note settings found!",i)}}function Xe(){var e,o,r,n;let t=window.app.plugins;try{let i=Ue("yearly")&&((o=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:o.yearly)||{};return{format:i.format||tr,folder:((r=i.folder)==null?void 0:r.trim())||"",template:((n=i.template)==null?void 0:n.trim())||""}}catch(i){console.info("No custom yearly note settings found!",i)}}function or(...t){let e=[];for(let r=0,n=t.length;r<n;r++)e=e.concat(t[r].split("/"));let o=[];for(let r=0,n=e.length;r<n;r++){let i=e[r];!i||i==="."||o.push(i)}return e[0]===""&&o.unshift(""),o.join("/")}function On(t){let e=t.substring(t.lastIndexOf("/")+1);return e.lastIndexOf(".")!=-1&&(e=e.substring(0,e.lastIndexOf("."))),e}async function In(t){let e=t.replace(/\\/g,"/").split("/");if(e.pop(),e.length){let o=or(...e);window.app.vault.getAbstractFileByPath(o)||await window.app.vault.createFolder(o)}}async function Je(t,e){e.endsWith(".md")||(e+=".md");let o=O.normalizePath(or(t,e));return await In(o),o}async function Me(t){let{metadataCache:e,vault:o}=window.app,r=O.normalizePath(t);if(r==="/")return Promise.resolve(["",null]);try{let n=e.getFirstLinkpathDest(r,""),i=await o.cachedRead(n),s=window.app.foldManager.load(n);return[i,s]}catch(n){return console.error(`Failed to read the daily note template '${r}'`,n),new O.Notice("Failed to read the daily note template"),["",null]}}function ee(t,e="day"){let o=t.clone().startOf(e).format();return`${e}-${o}`}function rr(t){return t.replace(/\[[^\]]*\]/g,"")}function Ln(t,e){if(e==="week"){let o=rr(t);return/w{1,2}/i.test(o)&&(/M{1,4}/.test(o)||/D{1,4}/.test(o))}return!1}function Ne(t,e){return nr(t.basename,e)}function Mn(t,e){return nr(On(t),e)}function nr(t,e){let r={day:ze,week:qe,month:Qe,quarter:Ge,year:Xe}[e]().format.split("/").pop(),n=window.moment(t,r,!0);if(!n.isValid())return null;if(Ln(r,e)&&e==="week"){let i=rr(r);if(/w{1,2}/i.test(i))return window.moment(t,r.replace(/M{1,4}/g,"").replace(/D{1,4}/g,""),!1)}return n}var qt=class extends Error{};async function ir(t){let e=window.app,{vault:o}=e,r=window.moment,{template:n,format:i,folder:s}=ze(),[a,l]=await Me(n),p=t.format(i),c=await Je(s,p);try{let u=await o.create(c,a.replace(/{{\s*date\s*}}/gi,p).replace(/{{\s*time\s*}}/gi,r().format("HH:mm")).replace(/{{\s*title\s*}}/gi,p).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(f,m,d,h,g,y)=>{let T=r(),k=t.clone().set({hour:T.get("hour"),minute:T.get("minute"),second:T.get("second")});return d&&k.add(parseInt(h,10),g),y?k.format(y.substring(1).trim()):k.format(i)}).replace(/{{\s*yesterday\s*}}/gi,t.clone().subtract(1,"day").format(i)).replace(/{{\s*tomorrow\s*}}/gi,t.clone().add(1,"d").format(i)));return e.foldManager.save(u,l),u}catch(u){console.error(`Failed to create file: '${c}'`,u),new O.Notice("Unable to create new file.")}}function Nn(t,e){var o;return(o=e[ee(t,"day")])!=null?o:null}function Fn(){let{vault:t}=window.app,{folder:e}=ze(),o=t.getAbstractFileByPath(O.normalizePath(e));if(!o)throw new qt("Failed to find daily notes folder");let r={};return O.Vault.recurseChildren(o,n=>{if(n instanceof O.TFile){let i=Ne(n,"day");if(i){let s=ee(i,"day");r[s]=n}}}),r}var Qt=class extends Error{};function Dn(){let{moment:t}=window,e=t.localeData()._week.dow,o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(;e;)o.push(o.shift()),e--;return o}function Rn(t){return Dn().indexOf(t.toLowerCase())}async function sr(t){let{vault:e}=window.app,{template:o,format:r,folder:n}=qe(),[i,s]=await Me(o),a=t.format(r),l=await Je(n,a);try{let p=await e.create(l,i.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(c,u,f,m,d,h)=>{let g=window.moment(),y=t.clone().set({hour:g.get("hour"),minute:g.get("minute"),second:g.get("second")});return f&&y.add(parseInt(m,10),d),h?y.format(h.substring(1).trim()):y.format(r)}).replace(/{{\s*title\s*}}/gi,a).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi,(c,u,f)=>{let m=Rn(u);return t.weekday(m).format(f.trim())}));return window.app.foldManager.save(p,s),p}catch(p){console.error(`Failed to create file: '${l}'`,p),new O.Notice("Unable to create new file.")}}function Bn(t,e){var o;return(o=e[ee(t,"week")])!=null?o:null}function $n(){let t={};if(!lr())return t;let{vault:e}=window.app,{folder:o}=qe(),r=e.getAbstractFileByPath(O.normalizePath(o));if(!r)throw new Qt("Failed to find weekly notes folder");return O.Vault.recurseChildren(r,n=>{if(n instanceof O.TFile){let i=Ne(n,"week");if(i){let s=ee(i,"week");t[s]=n}}}),t}var Gt=class extends Error{};async function ar(t){let{vault:e}=window.app,{template:o,format:r,folder:n}=Qe(),[i,s]=await Me(o),a=t.format(r),l=await Je(n,a);try{let p=await e.create(l,i.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(c,u,f,m,d,h)=>{let g=window.moment(),y=t.clone().set({hour:g.get("hour"),minute:g.get("minute"),second:g.get("second")});return f&&y.add(parseInt(m,10),d),h?y.format(h.substring(1).trim()):y.format(r)}).replace(/{{\s*date\s*}}/gi,a).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,a));return window.app.foldManager.save(p,s),p}catch(p){console.error(`Failed to create file: '${l}'`,p),new O.Notice("Unable to create new file.")}}function _n(t,e){var o;return(o=e[ee(t,"month")])!=null?o:null}function Wn(){let t={};if(!cr())return t;let{vault:e}=window.app,{folder:o}=Qe(),r=e.getAbstractFileByPath(O.normalizePath(o));if(!r)throw new Gt("Failed to find monthly notes folder");return O.Vault.recurseChildren(r,n=>{if(n instanceof O.TFile){let i=Ne(n,"month");if(i){let s=ee(i,"month");t[s]=n}}}),t}var Xt=class extends Error{};async function Hn(t){let{vault:e}=window.app,{template:o,format:r,folder:n}=Ge(),[i,s]=await Me(o),a=t.format(r),l=await Je(n,a);try{let p=await e.create(l,i.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(c,u,f,m,d,h)=>{let g=window.moment(),y=t.clone().set({hour:g.get("hour"),minute:g.get("minute"),second:g.get("second")});return f&&y.add(parseInt(m,10),d),h?y.format(h.substring(1).trim()):y.format(r)}).replace(/{{\s*date\s*}}/gi,a).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,a));return window.app.foldManager.save(p,s),p}catch(p){console.error(`Failed to create file: '${l}'`,p),new O.Notice("Unable to create new file.")}}function Vn(t,e){var o;return(o=e[ee(t,"quarter")])!=null?o:null}function jn(){let t={};if(!pr())return t;let{vault:e}=window.app,{folder:o}=Ge(),r=e.getAbstractFileByPath(O.normalizePath(o));if(!r)throw new Xt("Failed to find quarterly notes folder");return O.Vault.recurseChildren(r,n=>{if(n instanceof O.TFile){let i=Ne(n,"quarter");if(i){let s=ee(i,"quarter");t[s]=n}}}),t}var Jt=class extends Error{};async function Yn(t){let{vault:e}=window.app,{template:o,format:r,folder:n}=Xe(),[i,s]=await Me(o),a=t.format(r),l=await Je(n,a);try{let p=await e.create(l,i.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(c,u,f,m,d,h)=>{let g=window.moment(),y=t.clone().set({hour:g.get("hour"),minute:g.get("minute"),second:g.get("second")});return f&&y.add(parseInt(m,10),d),h?y.format(h.substring(1).trim()):y.format(r)}).replace(/{{\s*date\s*}}/gi,a).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,a));return window.app.foldManager.save(p,s),p}catch(p){console.error(`Failed to create file: '${l}'`,p),new O.Notice("Unable to create new file.")}}function Kn(t,e){var o;return(o=e[ee(t,"year")])!=null?o:null}function Un(){let t={};if(!ur())return t;let{vault:e}=window.app,{folder:o}=Xe(),r=e.getAbstractFileByPath(O.normalizePath(o));if(!r)throw new Jt("Failed to find yearly notes folder");return O.Vault.recurseChildren(r,n=>{if(n instanceof O.TFile){let i=Ne(n,"year");if(i){let s=ee(i,"year");t[s]=n}}}),t}function zn(){var r,n;let{app:t}=window,e=t.internalPlugins.plugins["daily-notes"];if(e&&e.enabled)return!0;let o=t.plugins.getPlugin("periodic-notes");return o&&((n=(r=o.settings)==null?void 0:r.daily)==null?void 0:n.enabled)}function lr(){var o,r;let{app:t}=window;if(t.plugins.getPlugin("calendar"))return!0;let e=t.plugins.getPlugin("periodic-notes");return e&&((r=(o=e.settings)==null?void 0:o.weekly)==null?void 0:r.enabled)}function cr(){var o,r;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((r=(o=e.settings)==null?void 0:o.monthly)==null?void 0:r.enabled)}function pr(){var o,r;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((r=(o=e.settings)==null?void 0:o.quarterly)==null?void 0:r.enabled)}function ur(){var o,r;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((r=(o=e.settings)==null?void 0:o.yearly)==null?void 0:r.enabled)}function qn(t){let e={day:ze,week:qe,month:Qe,quarter:Ge,year:Xe}[t];return e()}function Qn(t,e){return{day:ir,month:ar,week:sr}[t](e)}b.DEFAULT_DAILY_NOTE_FORMAT=Ut;b.DEFAULT_MONTHLY_NOTE_FORMAT=Zo;b.DEFAULT_QUARTERLY_NOTE_FORMAT=er;b.DEFAULT_WEEKLY_NOTE_FORMAT=zt;b.DEFAULT_YEARLY_NOTE_FORMAT=tr;b.appHasDailyNotesPluginLoaded=zn;b.appHasMonthlyNotesPluginLoaded=cr;b.appHasQuarterlyNotesPluginLoaded=pr;b.appHasWeeklyNotesPluginLoaded=lr;b.appHasYearlyNotesPluginLoaded=ur;b.createDailyNote=ir;b.createMonthlyNote=ar;b.createPeriodicNote=Qn;b.createQuarterlyNote=Hn;b.createWeeklyNote=sr;b.createYearlyNote=Yn;b.getAllDailyNotes=Fn;b.getAllMonthlyNotes=Wn;b.getAllQuarterlyNotes=jn;b.getAllWeeklyNotes=$n;b.getAllYearlyNotes=Un;b.getDailyNote=Nn;b.getDailyNoteSettings=ze;b.getDateFromFile=Ne;b.getDateFromPath=Mn;b.getDateUID=ee;b.getMonthlyNote=_n;b.getMonthlyNoteSettings=Qe;b.getPeriodicNoteSettings=qn;b.getQuarterlyNote=Vn;b.getQuarterlyNoteSettings=Ge;b.getTemplateInfo=Me;b.getWeeklyNote=Bn;b.getWeeklyNoteSettings=qe;b.getYearlyNote=Kn;b.getYearlyNoteSettings=Xe});var ms={};Tn(ms,{addIcons:()=>pn,default:()=>Bt});module.exports=Sn(ms);var $t=require("obsidian");var qo={blockRefAliasIndicator:"*",bookmarks:""};var je=require("obsidian");var z=class{constructor(e,o){this.details=[];if(this.plugin=e,this.cache=e.app.metadataCache.getCache(o),this.fileFullPath=o,this.cache.sections){for(let r of this.cache.sections)switch(r.type){case"heading":this.breakdownCacheItems(this.cache.headings,r,!1);break;case"list":this.breakdownCacheItems(this.cache.listItems,r,!0);break;default:this.details.push({index:0,type:r.type,lineStart:r.position.start.line,lineEnd:r.position.end.line,position:r.position,blockId:r.id});break}for(let r in this.details)this.details[r].index=Number(r)}}getBlockAtLine(e,o){let r=this.details[0];for(let n=0;n<this.details.length;n++){let i=this.details[n];if(o===!1&&e>=i.lineEnd)r=i;else if(o){let s=this.details[n+1];e>i.lineEnd&&s&&e<s.lineStart?r=s:e>=i.lineStart&&(r=i)}}return r}getBlockAfterLine(e){let o=this.getBlockAtLine(e,!0).index;return this.details.length===1?this.details[0]:this.details.length-1>o?this.details[o+1]:null}getBlockBeforeLine(e){let o=this.getBlockAtLine(e,!1).index;return this.details.length===0?null:o>0&&this.details.length>=o?this.details[o-1]:this.details[0]}getPositionOfHeaderAndItsChildren(e){let o=null,r=null,n=null;for(let i of this.details)if(o===null&&i.type==="heading"&&i.headingText===e)o=i.position.start,n=i.headingLevel,r=i.position.end;else{if(o!=null&&i.type==="heading"&&i.headingLevel<=n)break;r=i.position.end}return o===null?null:{start:o,end:r}}async createDocumentWithInfo(){let e=`# ${this.fileFullPath}

`;for(let i of this.details)e+=`${i.type} ${i.lineStart}->${i.lineEnd} ${i.blockId?i.blockId:""}
`;let o="/fileBreadkown.md";await this.plugin.app.vault.adapter.write(o,e);let r=await this.plugin.app.vault.getAbstractFileByPath(o);this.plugin.app.workspace.splitActiveLeaf("vertical").openFile(r)}breakdownCacheItems(e,o,r){let n=!1;for(let i of e){let s=this.positionOfItemWithinSameRange(i.position,o.position);if(s===!1&&n===!0)break;if(s){n=!0;let a={index:0,type:o.type,lineStart:i.position.start.line,lineEnd:i.position.end.line,position:i.position},l=i;if(l.heading&&(a.headingText=l.heading,a.headingLevel=l.level),r&&this.cache.blocks){for(let p of Object.values(this.cache.blocks))if(this.positionOfItemWithinSameRange(p.position,i.position)){a.blockId=p.id;break}}this.details.push(a)}}}positionOfItemWithinSameRange(e,o){return e.start.line>=o.start.line&&e.end.line<=o.end.line}};var Qo=require("obsidian");function R(t){return t.app.workspace.getActiveViewOfType(Qo.MarkdownView)}function bt(t){let e=R(t);if(!e)return 2;if(e.getMode()==="source")return 0;if(e.getMode()==="preview")return 1}function Go(t){let e=R(t),o=e.editor,r=o.getCursor().line,n=o.listSelections();if(n.length===1){let i=n[0],s=o.getLine(r).length;if(i.anchor.line===i.head.line&&(i.anchor.ch===s||i.head.ch===s)&&o.getSelection().length>0){let l=new z(t,e.file.path).getBlockAtLine(r,!0);o.setSelection({line:l.lineStart,ch:0},{line:l.lineEnd,ch:l.position.end.col})}else i.anchor.line===i.head.line&&o.setSelection({line:r,ch:0},{line:r,ch:o.getLine(r).length})}}function jt(t,e){let o=R(t),r=o.editor,n=r.getCursor().line,i=r.getLine(n).trim().length===0,s=new z(t,o.file.path),a;if(e?i?a=s.getBlockAtLine(n,!0):a=s.getBlockAfterLine(n):i?a=s.getBlockAtLine(n,!1):a=s.getBlockBeforeLine(n),a!==null){let l={line:a.position.start.line,ch:a.position.start.col},p={line:a.position.end.line,ch:a.position.end.col};r.setSelection(l,p),r.scrollIntoView({from:l,to:p})}}function Yt(t,e=!0){let o=R(t),r=o.editor,n=r.getCursor().line,i=this.app.metadataCache.getFileCache(o.file),s=new z(t,o.file.path),a=r.listSelections();if(a[0].anchor.line===a[0].head.line&&a[0].head.ch!==r.getSelection().length||a[0].head.ch===0&&a[0].anchor.ch===0&&r.getRange({line:n,ch:r.getLine(n).length},{line:n,ch:0}).length!==0)r.setSelection({line:n,ch:0},{line:n,ch:r.getLine(n).length});else{let l=s.details.find(c=>{if(n>=Number(c.position.start.line)&&n<=Number(c.position.end.line))return c.position.start});if(l===void 0){let c=null;for(let u of Object.entries(s.details))u.position&&(e===!1&&n<Number(u.position.end.line)&&c===null||e===!0&&n>Number(u.position.start.line))&&(c=u);if(c===null&&n===0&&s.details.length>0&&(c=i.sections[0]),c!==null){r.setSelection({line:c.position.start.line,ch:0},{line:c.position.end.line,ch:c.position.end.col});return}}let p=r.listSelections();if(l&&l.type==="paragraph"&&p.length===1&&p[0].anchor.line!==l.position.start.line&&p[0].head.line!==l.position.end.line)r.setSelection({line:l.position.start.line,ch:0},{line:l.position.end.line,ch:l.position.end.col});else{let c=0,u=0,f=null,m=null,d=null;a[0].anchor.line<a[0].head.line?(c=a[0].anchor.line,u=a[0].head.line):(c=a[0].head.line,u=a[0].anchor.line);for(let h=0;h<s.details.length;h++){if(n>=s.details[h].position.end.line){f=s.details[h];try{d=s.details[h+1]}catch(g){console.log(g)}}c>s.details[h].position.end.line&&(m=s.details[h])}m&&e?(r.setSelection({line:m.position.start.line,ch:0},{line:f.position.end.line,ch:r.getLine(f.position.end.line).length}),r.scrollIntoView({from:m.position.start,to:m.position.start})):e?(r.setSelection({line:0,ch:0},{line:u,ch:r.getLine(u).length}),r.scrollIntoView({from:{line:0,ch:0},to:{line:c,ch:0}})):d&&e===!1&&(r.setSelection({line:c,ch:0},{line:d.position.end.line,ch:r.getLine(d.position.end.line).length}),r.scrollIntoView({from:d.position.start,to:d.position.start}))}}}var Re=require("obsidian");var An=t=>crypto.getRandomValues(new Uint8Array(t)),En=(t,e,o)=>{let r=(2<<Math.log2(t.length-1))-1,n=-~(1.6*r*e/t.length);return(i=e)=>{let s="";for(;;){let a=o(n),l=n;for(;l--;)if(s+=t[a[l]&r]||"",s.length===i)return s}}},Xo=(t,e=21)=>En(t,e,An);var Kt=Xo("abcdefghijklmnopqrstuvwz0123456789",6);var De=require("obsidian");var Jo=require("obsidian"),K=class extends Jo.FuzzySuggestModal{constructor(e){super(e.app),this.scope.register(["Shift"],"Enter",o=>this.enterTrigger(o)),this.scope.register(["Ctrl"],"Enter",o=>this.enterTrigger(o))}setSuggesterData(e){this.data=e}async display(e){this.callbackFunction=e,this.open()}getItems(){return this.data}getItemText(e){return e.display}onChooseItem(){}renderSuggestion(e,o){o.createEl("div",{text:e.item.display})}enterTrigger(e){var n;let o=(n=document.querySelector(".suggestion-item.is-selected div"))==null?void 0:n.textContent,r=this.data.find(i=>i.display===o);r&&(this.invokeCallback(r,e),this.close())}onChooseSuggestion(e,o){this.invokeCallback(e.item,o)}invokeCallback(e,o){this.callbackFunction(e,o)}};var Ze=require("obsidian"),ae=Pn(fr());async function dr(){let t=(0,ae.getDailyNote)((0,Ze.moment)(),(0,ae.getAllDailyNotes)());return t===null&&(t=await(0,ae.createDailyNote)((0,Ze.moment)())),t.path}async function mr(){let t=(0,ae.getDailyNote)((0,Ze.moment)().add(1,"days"),(0,ae.getAllDailyNotes)());return t===null&&(t=await(0,ae.createDailyNote)((0,Ze.moment)().add(1,"days"))),t.path}function Zt(){return Object.keys(app.metadataCache.getTags()).sort((t,e)=>t.localeCompare(e))}function hr(t){let e=app,o=[];for(let r of e.vault.getMarkdownFiles()){let n=e.metadataCache.getFileCache(r);if(n.tags)for(let i of n.tags)t===i.tag&&o.push({tag:i,filePath:r.path,position:i.position})}return o.sort((r,n)=>r.filePath.localeCompare(n.filePath))}function gr(t){let e=[];for(let o of hr(t))e.includes(o.filePath)||e.push(o.filePath);return e}async function yr(t,e){let o=[];for(let r of hr(e)){let i=new z(t,r.filePath).getBlockAtLine(r.position.start.line,!0);if(i.type!=="yaml"){let s=await Fe(t,r.filePath),a="";for(let l of s.slice(i.lineStart,i.lineEnd+1))a+=`${l.display}
`;o.push({file:r.filePath,position:i.position,blockText:a.trim()})}}return o}var eo="#### #tag file search ####",to="---- #tag block search ----",oo=t=>app.metadataCache.fileToLinktext(app.vault.getAbstractFileByPath(t),"");async function vr(t,e){let o=await t.fs.getAllFiles();if(e){for(let n=0;n<o.length;n++)if(o[n].info.localeCompare(e,void 0,{sensitivity:"base"})===0){o.splice(n,1);break}}if(o.unshift({display:to,info:to}),o.unshift({display:eo,info:eo}),t.settings.bookmarks.trim().length>0){let n=t.settings.bookmarks.trim().split(`
`);for(let i=n.length-1;i>=0;i--){let s=n[i];s.search(";")>0&&(s=s.substr(0,s.search(";"))),s=s.replace("*",""),(s==="DNPTODAY"||s==="DNPTOMORROW"||await t.app.vault.adapter.exists(s))&&o.unshift({display:`Bookmark: ${n[i]}`,info:n[i]})}}let r=new K(t);return r.setSuggesterData(o),r.setPlaceholder("Select a file"),r}async function Fe(t,e){let o=[];for(let[r,n]of Object.entries((await t.app.vault.adapter.read(e)).split(`
`)))o.push({display:n,info:r});return o}async function le(t,e,o=0,r=0){let n=t.app.workspace.splitActiveLeaf("vertical"),i=t.app.metadataCache.getFirstLinkpathDest((0,De.getLinkpath)(e),"/");await n.openFile(i,{active:!0}),setTimeout(async()=>{let s=R(t).editor;s.setSelection({line:o,ch:0},{line:o+r,ch:s.getLine(o+r).length}),s.scrollIntoView({from:{line:o+r,ch:0},to:{line:o+r,ch:0}})},500)}async function et(t,e,o=!1){let r=0,n=!1;e.substr(0,1)==="*"&&(n=!0,e=e.substring(1));let i=e.substring(0,e.search(";")),s=e.substring(i.length+1).toLocaleUpperCase().trim();try{i==="DNPTODAY"&&(i=await dr()),i==="DNPTOMORROW"&&(i=await mr());let a=-1,l=null;if(await t.app.vault.adapter.exists(i)){if(l=await Fe(t,i),s==="BOTTOM"||s!=="TOP")if(s==="BOTTOM")a=l.length-1;else{for(let p=0;p<l.length;p++)if(l[p].display.toLocaleUpperCase().trim()===s){a=o===!0?p+1:p;break}a===-1&&(r=1)}}else r=2;return{fileName:i,fileLineNumber:a,fileBookmarkContentsArray:l,errorNumber:r,contextMenuCommand:n}}catch(a){new De.Notice(`Something is wrong with the bookmark. File system reports: ${a.toString()}`),r=2}}async function Xn(t,e,o,r){let n=Zt();if(n.length<=0){new De.Notice("No tags in this vault");return}let i=[];for(let a of n)i.push({display:a,info:a});let s=new K(t);s.setSuggesterData(i),s.setPlaceholder("Select a tag"),await s.display(async a=>{let l=[],p=gr(a.info);for(let u of p)l.push({display:u,info:u});let c=new K(t);c.setSuggesterData(l),c.setPlaceholder("Select a file"),await c.display(async(u,f)=>{let m=await Fe(t,u.info);o&&m.unshift({display:"-- Top of file --",info:-1}),await wr(t,e,o,u.info,m,0,f,r)})})}async function Jn(t,e,o,r){let n=Zt();if(n.length<=0){new De.Notice("No tags in this vault");return}let i=[];for(let a of n)i.push({display:a,info:a});let s=new K(t);s.setSuggesterData(i),s.setPlaceholder("Select a tag"),await s.display(async a=>{let l=[],p=yr(t,a.info);for(let u of await p)l.push({display:`${u.file}
${u.blockText}`,info:u});let c=new K(t);c.setSuggesterData(l),c.setPlaceholder("Select a block"),await c.display(async(u,f)=>{r(u.info.file,await Fe(t,u.info.file),u.info.position.start.line,u.info.position.end.line,f)})})}async function tt(t,e,o,r,n){await(bt(t)===2?await vr(t):await vr(t,R(t).file.path)).display(async(s,a)=>{let l=a.shiftKey,p=0,c=s.info;if(c===eo){await Xn(t,e,o,n);return}if(c===to){await Jn(t,e,o,n);return}if(c.includes("DNPTODAY")||c.includes("DNPTOMORROW")||c.includes(".md;")){let f=await et(t,c,r);if(l===!1){n(f.fileName,f.fileBookmarkContentsArray,f.fileLineNumber,f.fileLineNumber,a);return}p=f.fileLineNumber,c=f.fileName,o=!1}let u=await Fe(t,c);o&&u.unshift({display:"-- Top of file --",info:-1}),await wr(t,e,o,c,u,p,a,n)})}async function wr(t,e,o,r,n,i,s,a){let l=new K(t);l.setPlaceholder("Select the line from file");let p=n.map(c=>{let u=Number(c.info)+1;return{display:(u>0?`${u} `:"")+c.display,info:c.info}});i>0?l.setSuggesterData(p.slice(i)):l.setSuggesterData(p),await l.display(async(c,u)=>{let f=Number(c.info),m=f;if(o&&n.splice(0,1),e)if(f===n.length-1)a(r,n,f,f,s,u);else{f=f===-1?0:f;let d=n.slice(f),h=new K(t);h.setSuggesterData(d),h.setPlaceholder("Select the last line for the selection"),await h.display(async(g,y)=>{a(r,n,f,Number(g.info),s,u,y)})}else a(r,n,f,m,s,u)})}function br(t){return t.replace(/\[|\]|#|\|/g,"").replace(/:/g," ")}async function xt(t,e,o=!1,r="*"){let n=R(t),i=n.editor,s=new z(t,n.file.path),a=i.listSelections(),l=[];for(let p of a){let c=p.anchor.line>p.head.line?p.head.line:p.anchor.line,u=p.anchor.line>p.head.line?p.anchor.line:p.head.line;for(let f=c;f<=u;f++)for(let m=0;m<s.details.length;m++){let d=s.details[m];if(f>=d.position.start.line&&f<=d.position.end.line){if((d.type==="paragraph"||d.type==="list"||d.type==="blockquote"||d.type==="callout")&&!d.blockId){let h=Kt();i.replaceRange(` ^${h}`,{line:Number(d.position.end.line),ch:d.position.end.col},{line:Number(d.position.end.line),ch:d.position.end.col}),l.push(`#^${h}`),f=d.position.end.line;break}if(d.type==="paragraph"||d.type==="list"||d.type==="blockquote"){l.push(`#^${d.blockId}`),f=d.position.end.line;break}if(d.type==="heading"){l.push(`#${br(d.headingText)}`),f=d.position.end.line;break}}}}if(e&&l.length>0){let p="",c=o===!1?"!":"";r=o===!0?`|${r}`:"";let u=oo(n.file.path);l.forEach(f=>p+=`${c}[[${u}${f}${r}]]
`),navigator.clipboard.writeText(p).then(f=>f)}return l}async function xr(t,e,o,r,n,i){if(n===-1){let a=new z(t,r);a.details.length>0&&a.details[0].type==="yaml"&&(n=a.details[0].lineEnd)}i.splice(Number(n)+1,0,{display:o,info:""});let s="";for(let a of i)s+=`${a.display}
`;if(s=s.substring(0,s.length-1),await t.app.vault.adapter.write(r,s),e===!1){let a=R(t).editor,l=a.getCursor().line,p=a.getSelection();p===""||a.getLine(l).length===p.length?a.replaceRange("",{line:l,ch:0},{line:l+1,ch:0}):a.replaceSelection("")}}async function Be(t,e,o=""){let r=o===""?R(t).editor:null,n=o===""?r.getSelection():o;n===""&&(n=r.getLine(r.getCursor().line)),await tt(t,!1,!0,!1,async(i,s,a,l,p,c)=>{if(await xr(t,e,n,i,a,s),p&&(p.ctrlKey||p.metaKey)||c&&(c.ctrlKey||c.metaKey)){let u=n.split(`
`).length,f=u>1?u-1:0;le(t,i,a+1,f)}})}async function ot(t,e,o,r){let n=await et(t,o,!1);if(n.errorNumber===1)new Re.Notice("Location in the bookmark does not exist.");else if(n.errorNumber===2)new Re.Notice("File as defined in the bookmark does not exist.");else{let i=R(t).editor,s=i.getCursor().line,a=i.getSelection();if(a===""&&(a=i.getLine(s)),xr(t,e,a,n.fileName,n.fileLineNumber,n.fileBookmarkContentsArray),r&&(r.ctrlKey||r.metaKey)){let l=a.split(`
`).length,p=l>1?l-1:0;le(t,n.fileName,n.fileLineNumber+1,p)}}}async function ro(t,e){let o=`[[${oo(R(t).file.path)}]]`;e?(navigator.clipboard.writeText(o).then(r=>r),new Re.Notice(`${o}

 Copied to the clipboard.`)):Be(t,!0,o)}async function kr(t){await tt(t,!1,!0,!1,async(e,o,r,n,i,s)=>{if(r===-1){let c=new z(t,e);c.details.length>0&&c.details[0].type==="yaml"&&(r=c.details[0].lineEnd)}let a=await xt(t,!1),l="",p=R(t).file.path;if(a.length>0){for(let u of a)l+=`![[${p}${u}]]
`;l=l.substring(0,l.length-1),o.splice(Number(r)+1,0,{display:l,info:""});let c="";for(let u of o)c+=`${u.display}
`;c=c.substring(0,c.length-1),t.app.vault.adapter.write(e,c),(i&&(i.ctrlKey||i.metaKey)||s&&(s.ctrlKey||s.metaKey))&&le(t,e,r+1)}})}async function no(t,e){await tt(t,!0,!1,!0,async(o,r,n,i,s,a,l)=>{let p=(s==null?void 0:s.ctrlKey)||(a==null?void 0:a.ctrlKey)||(l==null?void 0:l.ctrlKey);n=n===-1?n=0:n,i=i===-1?i=0:i;let c="";for(let u of r.slice(n,i+1))c+=`${u.display}
`;if(c=c.substring(0,c.length-1),R(t).editor.replaceSelection(c),e===!1){r.splice(n,i+1-n);let u="";for(let f of r)u+=`${f.display}
`;u=u.substring(0,u.length-1),await t.app.vault.adapter.write(o,u),p&&await le(t,o,n)}else p&&await le(t,o,n,i-n)})}async function Tr(t){await tt(t,!0,!1,!0,async(e,o,r,n,i,s,a)=>{r=r===-1?r=0:r,n=n===-1?n=0:n;let l=new z(t,e),p=(await t.app.vault.adapter.read(e)).split(`
`),c=!1,u=[];for(let f=r;f<=n;f++)for(let m=0;m<l.details.length;m++){let d=l.details[m];if(f>=d.position.start.line&&f<=d.position.end.line){if((d.type==="paragraph"||d.type==="list")&&!d.blockId){let h=Kt();p.splice(d.position.end.line,1,`${p[d.position.end.line]} ^${h}`),u.push(`#^${h}`),c=!0,f=d.position.end.line;break}if(d.type==="paragraph"||d.type==="list"){u.push(`#^${d.blockId}`),f=d.position.end.line;break}if(d.type==="heading"){let h=br(d.headingText);u.push(`#${h}`),f=d.position.end.line;break}}}if(c===!0){let f="";for(let m of p)f+=`${m}
`;f=f.substring(0,f.length-1),await t.app.vault.adapter.write(e,f)}if(u.length>0){let f="";for(let m of u)f+=`![[${e}${m}]]
`;f=f.substring(0,f.length-1),R(t).editor.replaceSelection(f)}(i.ctrlKey||s.ctrlKey||a.ctrlKey)&&le(t,e,r,n-r)})}function rt(t){let e=R(t),o=e.editor,r=o.getCursor().line,n=this.app.metadataCache.getFileCache(e.file);if(n.links||n.embeds||n.headings){let i=o.getCursor().ch,s=null;return n.links&&(s=n.links.find(a=>a.position.start.line===r&&i>=a.position.start.col&&i<=a.position.end.col)),!s&&n.embeds&&(s=n.embeds.find(a=>a.position.start.line===r&&i>=a.position.start.col&&i<=a.position.end.col)),s||null}return null}async function io(t,e,o){let r=t.app.metadataCache.getFirstLinkpathDest((0,Re.getLinkpath)(e.link),"/"),n=await t.app.vault.read(r),i=new z(t,r.path);if(i.details&&e.link.includes("^")){let s=e.link.substr(e.link.indexOf("^")+1),a=i.details.find(l=>l.blockId===s).position;n=n.split(`
`).slice(a.start.line,a.end.line+1).join(`
`),n=n.replace(`^${s}`,"")}else if(i.details&&e.link.contains("#")){let s=e.link.substr(e.link.indexOf("#")+1),a=i.getPositionOfHeaderAndItsChildren(s);n=n.split(`
`).slice(a.start.line,a.end.line+1).join(`
`)}o&&(n+=` [[${e.link}|${t.settings.blockRefAliasIndicator}]]`),R(t).editor.replaceRange(n,{line:e.position.start.line,ch:e.position.start.col},{line:e.position.end.line,ch:e.position.end.col})}var he=require("obsidian");async function Sr(t){let e=t.app.workspace.getActiveViewOfType(he.MarkdownView);if(!e||e.getMode()!=="source"){new he.Notice("A file must be in source edit mode to add a bookmark");return}let o=e.editor.getLine(e.editor.getCursor().line),r=new K(this),n=new Array;n.push({display:"TOP: Bookmark the top of the file ",info:"TOP"}),n.push({display:"TOP: Bookmark the top of the file and mark as a context menu location",info:"TOP*"}),n.push({display:"BOTTOM: Bookmark the bottom of the file ",info:"BOTTOM"}),n.push({display:"BOTTOM: Bookmark the bottom of the file and mark as a context menu location",info:"BOTTOM*"}),o.length>0&&(n.push({display:`Location: of selected text "${o}"`,info:o}),n.push({display:`Location: of selected text and mark as a context menu location "${o}"`,info:`${o}*`})),r.setSuggesterData(n),r.display(i=>{let s=i.info,a="";if(i.info.indexOf("*")>0&&(s=s.replace("*",""),a="*"),i){let l=`${a+e.file.path};${s}`;t.settings.bookmarks.split(`
`).find(p=>p===l)?new he.Notice(`The bookmark: ${l} already exists.`):(t.settings.bookmarks=`${t.settings.bookmarks.trim()}
${l}`,t.saveData(t.settings),new he.Notice(`The bookmark: ${l} saved.`))}})}async function Cr(t){let e=t.settings.bookmarks.split(`
`);if(e.length===0)new he.Notice("There are no bookmarks defined.");else{let o=new K(this),r=new Array;for(let n of e)r.push({display:n,info:n});o.setSuggesterData(r),o.display(n=>{let i=e.filter(s=>s!==n.info);t.settings.bookmarks=i.join(`
`),t.saveData(t.settings)})}}async function Ar(t){let e=t.settings.bookmarks.split(`
`);if(e.length===0)new he.Notice("There are no bookmarks defined.");else{let o=new Array;for(let n=e.length-1;n>=0;n--)o.unshift({display:e[n],info:e[n]});let r=new K(t);r.setSuggesterData(o),r.setPlaceholder("Select a file"),await r.display(async n=>{let i=await et(t,n.info,!1);le(t,i.fileName,i.fileLineNumber,0)})}}var Ie=require("obsidian");function ce(t){return Array.isArray?Array.isArray(t):Dr(t)==="[object Array]"}var Zn=1/0;function ei(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-Zn?"-0":e}function ti(t){return t==null?"":ei(t)}function ie(t){return typeof t=="string"}function Nr(t){return typeof t=="number"}function oi(t){return t===!0||t===!1||ri(t)&&Dr(t)=="[object Boolean]"}function Fr(t){return typeof t=="object"}function ri(t){return Fr(t)&&t!==null}function q(t){return t!=null}function so(t){return!t.trim().length}function Dr(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}var ni="Incorrect 'index' type",ii=t=>`Invalid value for key ${t}`,si=t=>`Pattern length exceeds max of ${t}.`,ai=t=>`Missing ${t} property in key`,li=t=>`Property 'weight' in key '${t}' must be a positive integer`,Er=Object.prototype.hasOwnProperty,ao=class{constructor(e){this._keys=[],this._keyMap={};let o=0;e.forEach(r=>{let n=Rr(r);this._keys.push(n),this._keyMap[n.id]=n,o+=n.weight}),this._keys.forEach(r=>{r.weight/=o})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Rr(t){let e=null,o=null,r=null,n=1,i=null;if(ie(t)||ce(t))r=t,e=Or(t),o=lo(t);else{if(!Er.call(t,"name"))throw new Error(ai("name"));let s=t.name;if(r=s,Er.call(t,"weight")&&(n=t.weight,n<=0))throw new Error(li(s));e=Or(s),o=lo(s),i=t.getFn}return{path:e,id:o,weight:n,src:r,getFn:i}}function Or(t){return ce(t)?t:t.split(".")}function lo(t){return ce(t)?t.join("."):t}function ci(t,e){let o=[],r=!1,n=(i,s,a)=>{if(q(i))if(!s[a])o.push(i);else{let l=s[a],p=i[l];if(!q(p))return;if(a===s.length-1&&(ie(p)||Nr(p)||oi(p)))o.push(ti(p));else if(ce(p)){r=!0;for(let c=0,u=p.length;c<u;c+=1)n(p[c],s,a+1)}else s.length&&n(p,s,a+1)}};return n(t,ie(e)?e.split("."):e,0),r?o:o[0]}var pi={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ui={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},fi={location:0,threshold:.6,distance:100},di={useExtendedSearch:!1,getFn:ci,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},v={...ui,...pi,...fi,...di},mi=/[^ ]+/g;function hi(t=1,e=3){let o=new Map,r=Math.pow(10,e);return{get(n){let i=n.match(mi).length;if(o.has(i))return o.get(i);let s=1/Math.pow(i,.5*t),a=parseFloat(Math.round(s*r)/r);return o.set(i,a),a},clear(){o.clear()}}}var nt=class{constructor({getFn:e=v.getFn,fieldNormWeight:o=v.fieldNormWeight}={}){this.norm=hi(o,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((o,r)=>{this._keysMap[o.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ie(this.docs[0])?this.docs.forEach((e,o)=>{this._addString(e,o)}):this.docs.forEach((e,o)=>{this._addObject(e,o)}),this.norm.clear())}add(e){let o=this.size();ie(e)?this._addString(e,o):this._addObject(e,o)}removeAt(e){this.records.splice(e,1);for(let o=e,r=this.size();o<r;o+=1)this.records[o].i-=1}getValueForItemAtKeyId(e,o){return e[this._keysMap[o]]}size(){return this.records.length}_addString(e,o){if(!q(e)||so(e))return;let r={v:e,i:o,n:this.norm.get(e)};this.records.push(r)}_addObject(e,o){let r={i:o,$:{}};this.keys.forEach((n,i)=>{let s=n.getFn?n.getFn(e):this.getFn(e,n.path);if(q(s)){if(ce(s)){let a=[],l=[{nestedArrIndex:-1,value:s}];for(;l.length;){let{nestedArrIndex:p,value:c}=l.pop();if(q(c))if(ie(c)&&!so(c)){let u={v:c,i:p,n:this.norm.get(c)};a.push(u)}else ce(c)&&c.forEach((u,f)=>{l.push({nestedArrIndex:f,value:u})})}r.$[i]=a}else if(ie(s)&&!so(s)){let a={v:s,n:this.norm.get(s)};r.$[i]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}};function Br(t,e,{getFn:o=v.getFn,fieldNormWeight:r=v.fieldNormWeight}={}){let n=new nt({getFn:o,fieldNormWeight:r});return n.setKeys(t.map(Rr)),n.setSources(e),n.create(),n}function gi(t,{getFn:e=v.getFn,fieldNormWeight:o=v.fieldNormWeight}={}){let{keys:r,records:n}=t,i=new nt({getFn:e,fieldNormWeight:o});return i.setKeys(r),i.setIndexRecords(n),i}function kt(t,{errors:e=0,currentLocation:o=0,expectedLocation:r=0,distance:n=v.distance,ignoreLocation:i=v.ignoreLocation}={}){let s=e/t.length;if(i)return s;let a=Math.abs(r-o);return n?s+a/n:a?1:s}function yi(t=[],e=v.minMatchCharLength){let o=[],r=-1,n=-1,i=0;for(let s=t.length;i<s;i+=1){let a=t[i];a&&r===-1?r=i:!a&&r!==-1&&(n=i-1,n-r+1>=e&&o.push([r,n]),r=-1)}return t[i-1]&&i-r>=e&&o.push([r,i-1]),o}var xe=32;function vi(t,e,o,{location:r=v.location,distance:n=v.distance,threshold:i=v.threshold,findAllMatches:s=v.findAllMatches,minMatchCharLength:a=v.minMatchCharLength,includeMatches:l=v.includeMatches,ignoreLocation:p=v.ignoreLocation}={}){if(e.length>xe)throw new Error(si(xe));let c=e.length,u=t.length,f=Math.max(0,Math.min(r,u)),m=i,d=f,h=a>1||l,g=h?Array(u):[],y;for(;(y=t.indexOf(e,d))>-1;){let x=kt(e,{currentLocation:y,expectedLocation:f,distance:n,ignoreLocation:p});if(m=Math.min(x,m),d=y+c,h){let A=0;for(;A<c;)g[y+A]=1,A+=1}}d=-1;let T=[],k=1,w=c+u,S=1<<c-1;for(let x=0;x<c;x+=1){let A=0,C=w;for(;A<C;)kt(e,{errors:x,currentLocation:f+C,expectedLocation:f,distance:n,ignoreLocation:p})<=m?A=C:w=C,C=Math.floor((w-A)/2+A);w=C;let I=Math.max(1,f-C+1),N=s?u:Math.min(f+C,u)+c,_=Array(N+2);_[N+1]=(1<<x)-1;for(let D=N;D>=I;D-=1){let Q=D-1,Y=o[t.charAt(Q)];if(h&&(g[Q]=+!!Y),_[D]=(_[D+1]<<1|1)&Y,x&&(_[D]|=(T[D+1]|T[D])<<1|1|T[D+1]),_[D]&S&&(k=kt(e,{errors:x,currentLocation:Q,expectedLocation:f,distance:n,ignoreLocation:p}),k<=m)){if(m=k,d=Q,d<=f)break;I=Math.max(1,2*f-d)}}if(kt(e,{errors:x+1,currentLocation:f,expectedLocation:f,distance:n,ignoreLocation:p})>m)break;T=_}let P={isMatch:d>=0,score:Math.max(.001,k)};if(h){let x=yi(g,a);x.length?l&&(P.indices=x):P.isMatch=!1}return P}function wi(t){let e={};for(let o=0,r=t.length;o<r;o+=1){let n=t.charAt(o);e[n]=(e[n]||0)|1<<r-o-1}return e}var Tt=class{constructor(e,{location:o=v.location,threshold:r=v.threshold,distance:n=v.distance,includeMatches:i=v.includeMatches,findAllMatches:s=v.findAllMatches,minMatchCharLength:a=v.minMatchCharLength,isCaseSensitive:l=v.isCaseSensitive,ignoreLocation:p=v.ignoreLocation}={}){if(this.options={location:o,threshold:r,distance:n,includeMatches:i,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:p},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;let c=(f,m)=>{this.chunks.push({pattern:f,alphabet:wi(f),startIndex:m})},u=this.pattern.length;if(u>xe){let f=0,m=u%xe,d=u-m;for(;f<d;)c(this.pattern.substr(f,xe),f),f+=xe;if(m){let h=u-xe;c(this.pattern.substr(h),h)}}else c(this.pattern,0)}searchIn(e){let{isCaseSensitive:o,includeMatches:r}=this.options;if(o||(e=e.toLowerCase()),this.pattern===e){let d={isMatch:!0,score:0};return r&&(d.indices=[[0,e.length-1]]),d}let{location:n,distance:i,threshold:s,findAllMatches:a,minMatchCharLength:l,ignoreLocation:p}=this.options,c=[],u=0,f=!1;this.chunks.forEach(({pattern:d,alphabet:h,startIndex:g})=>{let{isMatch:y,score:T,indices:k}=vi(e,d,h,{location:n+g,distance:i,threshold:s,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:p});y&&(f=!0),u+=T,y&&k&&(c=[...c,...k])});let m={isMatch:f,score:f?u/this.chunks.length:1};return f&&r&&(m.indices=c),m}},se=class{constructor(e){this.pattern=e}static isMultiMatch(e){return Ir(e,this.multiRegex)}static isSingleMatch(e){return Ir(e,this.singleRegex)}search(){}};function Ir(t,e){let o=t.match(e);return o?o[1]:null}var co=class extends se{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){let o=e===this.pattern;return{isMatch:o,score:o?0:1,indices:[0,this.pattern.length-1]}}},po=class extends se{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){let r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}},uo=class extends se{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){let o=e.startsWith(this.pattern);return{isMatch:o,score:o?0:1,indices:[0,this.pattern.length-1]}}},fo=class extends se{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){let o=!e.startsWith(this.pattern);return{isMatch:o,score:o?0:1,indices:[0,e.length-1]}}},mo=class extends se{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){let o=e.endsWith(this.pattern);return{isMatch:o,score:o?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},ho=class extends se{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){let o=!e.endsWith(this.pattern);return{isMatch:o,score:o?0:1,indices:[0,e.length-1]}}},Pt=class extends se{constructor(e,{location:o=v.location,threshold:r=v.threshold,distance:n=v.distance,includeMatches:i=v.includeMatches,findAllMatches:s=v.findAllMatches,minMatchCharLength:a=v.minMatchCharLength,isCaseSensitive:l=v.isCaseSensitive,ignoreLocation:p=v.ignoreLocation}={}){super(e),this._bitapSearch=new Tt(e,{location:o,threshold:r,distance:n,includeMatches:i,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:p})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}},St=class extends se{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let o=0,r,n=[],i=this.pattern.length;for(;(r=e.indexOf(this.pattern,o))>-1;)o=r+i,n.push([r,o-1]);let s=!!n.length;return{isMatch:s,score:s?0:1,indices:n}}},go=[co,St,uo,fo,ho,mo,po,Pt],Lr=go.length,bi=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,xi="|";function ki(t,e={}){return t.split(xi).map(o=>{let r=o.trim().split(bi).filter(i=>i&&!!i.trim()),n=[];for(let i=0,s=r.length;i<s;i+=1){let a=r[i],l=!1,p=-1;for(;!l&&++p<Lr;){let c=go[p],u=c.isMultiMatch(a);u&&(n.push(new c(u,e)),l=!0)}if(!l)for(p=-1;++p<Lr;){let c=go[p],u=c.isSingleMatch(a);if(u){n.push(new c(u,e));break}}}return n})}var Ti=new Set([Pt.type,St.type]),yo=class{constructor(e,{isCaseSensitive:o=v.isCaseSensitive,includeMatches:r=v.includeMatches,minMatchCharLength:n=v.minMatchCharLength,ignoreLocation:i=v.ignoreLocation,findAllMatches:s=v.findAllMatches,location:a=v.location,threshold:l=v.threshold,distance:p=v.distance}={}){this.query=null,this.options={isCaseSensitive:o,includeMatches:r,minMatchCharLength:n,findAllMatches:s,ignoreLocation:i,location:a,threshold:l,distance:p},this.pattern=o?e:e.toLowerCase(),this.query=ki(this.pattern,this.options)}static condition(e,o){return o.useExtendedSearch}searchIn(e){let o=this.query;if(!o)return{isMatch:!1,score:1};let{includeMatches:r,isCaseSensitive:n}=this.options;e=n?e:e.toLowerCase();let i=0,s=[],a=0;for(let l=0,p=o.length;l<p;l+=1){let c=o[l];s.length=0,i=0;for(let u=0,f=c.length;u<f;u+=1){let m=c[u],{isMatch:d,indices:h,score:g}=m.search(e);if(d){if(i+=1,a+=g,r){let y=m.constructor.type;Ti.has(y)?s=[...s,...h]:s.push(h)}}else{a=0,i=0,s.length=0;break}}if(i){let u={isMatch:!0,score:a/i};return r&&(u.indices=s),u}}return{isMatch:!1,score:1}}},vo=[];function Pi(...t){vo.push(...t)}function wo(t,e){for(let o=0,r=vo.length;o<r;o+=1){let n=vo[o];if(n.condition(t,e))return new n(t,e)}return new Tt(t,e)}var Ct={AND:"$and",OR:"$or"},bo={PATH:"$path",PATTERN:"$val"},xo=t=>!!(t[Ct.AND]||t[Ct.OR]),Si=t=>!!t[bo.PATH],Ci=t=>!ce(t)&&Fr(t)&&!xo(t),Mr=t=>({[Ct.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function $r(t,e,{auto:o=!0}={}){let r=n=>{let i=Object.keys(n),s=Si(n);if(!s&&i.length>1&&!xo(n))return r(Mr(n));if(Ci(n)){let l=s?n[bo.PATH]:i[0],p=s?n[bo.PATTERN]:n[l];if(!ie(p))throw new Error(ii(l));let c={keyId:lo(l),pattern:p};return o&&(c.searcher=wo(p,e)),c}let a={children:[],operator:i[0]};return i.forEach(l=>{let p=n[l];ce(p)&&p.forEach(c=>{a.children.push(r(c))})}),a};return xo(t)||(t=Mr(t)),r(t)}function Ai(t,{ignoreFieldNorm:e=v.ignoreFieldNorm}){t.forEach(o=>{let r=1;o.matches.forEach(({key:n,norm:i,score:s})=>{let a=n?n.weight:null;r*=Math.pow(s===0&&a?Number.EPSILON:s,(a||1)*(e?1:i))}),o.score=r})}function Ei(t,e){let o=t.matches;e.matches=[],q(o)&&o.forEach(r=>{if(!q(r.indices)||!r.indices.length)return;let{indices:n,value:i}=r,s={indices:n,value:i};r.key&&(s.key=r.key.src),r.idx>-1&&(s.refIndex=r.idx),e.matches.push(s)})}function Oi(t,e){e.score=t.score}function Ii(t,e,{includeMatches:o=v.includeMatches,includeScore:r=v.includeScore}={}){let n=[];return o&&n.push(Ei),r&&n.push(Oi),t.map(i=>{let{idx:s}=i,a={item:e[s],refIndex:s};return n.length&&n.forEach(l=>{l(i,a)}),a})}var pe=class{constructor(e,o={},r){this.options={...v,...o},this.options.useExtendedSearch,this._keyStore=new ao(this.options.keys),this.setCollection(e,r)}setCollection(e,o){if(this._docs=e,o&&!(o instanceof nt))throw new Error(ni);this._myIndex=o||Br(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){q(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let o=[];for(let r=0,n=this._docs.length;r<n;r+=1){let i=this._docs[r];e(i,r)&&(this.removeAt(r),r-=1,n-=1,o.push(i))}return o}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:o=-1}={}){let{includeMatches:r,includeScore:n,shouldSort:i,sortFn:s,ignoreFieldNorm:a}=this.options,l=ie(e)?ie(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Ai(l,{ignoreFieldNorm:a}),i&&l.sort(s),Nr(o)&&o>-1&&(l=l.slice(0,o)),Ii(l,this._docs,{includeMatches:r,includeScore:n})}_searchStringList(e){let o=wo(e,this.options),{records:r}=this._myIndex,n=[];return r.forEach(({v:i,i:s,n:a})=>{if(!q(i))return;let{isMatch:l,score:p,indices:c}=o.searchIn(i);l&&n.push({item:i,idx:s,matches:[{score:p,value:i,norm:a,indices:c}]})}),n}_searchLogical(e){let o=$r(e,this.options),r=(a,l,p)=>{if(!a.children){let{keyId:u,searcher:f}=a,m=this._findMatches({key:this._keyStore.get(u),value:this._myIndex.getValueForItemAtKeyId(l,u),searcher:f});return m&&m.length?[{idx:p,item:l,matches:m}]:[]}let c=[];for(let u=0,f=a.children.length;u<f;u+=1){let m=a.children[u],d=r(m,l,p);if(d.length)c.push(...d);else if(a.operator===Ct.AND)return[]}return c},n=this._myIndex.records,i={},s=[];return n.forEach(({$:a,i:l})=>{if(q(a)){let p=r(o,a,l);p.length&&(i[l]||(i[l]={idx:l,item:a,matches:[]},s.push(i[l])),p.forEach(({matches:c})=>{i[l].matches.push(...c)}))}}),s}_searchObjectList(e){let o=wo(e,this.options),{keys:r,records:n}=this._myIndex,i=[];return n.forEach(({$:s,i:a})=>{if(!q(s))return;let l=[];r.forEach((p,c)=>{l.push(...this._findMatches({key:p,value:s[c],searcher:o}))}),l.length&&i.push({idx:a,item:s,matches:l})}),i}_findMatches({key:e,value:o,searcher:r}){if(!q(o))return[];let n=[];if(ce(o))o.forEach(({v:i,i:s,n:a})=>{if(!q(i))return;let{isMatch:l,score:p,indices:c}=r.searchIn(i);l&&n.push({score:p,key:e,value:i,idx:s,norm:a,indices:c})});else{let{v:i,n:s}=o,{isMatch:a,score:l,indices:p}=r.searchIn(i);a&&n.push({score:l,key:e,value:i,norm:s,indices:p})}return n}};pe.version="7.0.0";pe.createIndex=Br;pe.parseIndex=gi;pe.config=v;pe.parseQuery=$r;Pi(yo);var ln=require("obsidian");var L="top",B="bottom",F="right",M="left",At="auto",ge=[L,B,F,M],ue="start",ke="end",_r="clippingParents",Et="viewport",$e="popper",Wr="reference",ko=ge.reduce(function(t,e){return t.concat([e+"-"+ue,e+"-"+ke])},[]),Ot=[].concat(ge,[At]).reduce(function(t,e){return t.concat([e,e+"-"+ue,e+"-"+ke])},[]),Li="beforeRead",Mi="read",Ni="afterRead",Fi="beforeMain",Di="main",Ri="afterMain",Bi="beforeWrite",$i="write",_i="afterWrite",Hr=[Li,Mi,Ni,Fi,Di,Ri,Bi,$i,_i];function W(t){return t?(t.nodeName||"").toLowerCase():null}function E(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function G(t){var e=E(t).Element;return t instanceof e||t instanceof Element}function $(t){var e=E(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function _e(t){if(typeof ShadowRoot=="undefined")return!1;var e=E(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Wi(t){var e=t.state;Object.keys(e.elements).forEach(function(o){var r=e.styles[o]||{},n=e.attributes[o]||{},i=e.elements[o];!$(i)||!W(i)||(Object.assign(i.style,r),Object.keys(n).forEach(function(s){var a=n[s];a===!1?i.removeAttribute(s):i.setAttribute(s,a===!0?"":a)}))})}function Hi(t){var e=t.state,o={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,o.popper),e.styles=o,e.elements.arrow&&Object.assign(e.elements.arrow.style,o.arrow),function(){Object.keys(e.elements).forEach(function(r){var n=e.elements[r],i=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:o[r]),a=s.reduce(function(l,p){return l[p]="",l},{});!$(n)||!W(n)||(Object.assign(n.style,a),Object.keys(i).forEach(function(l){n.removeAttribute(l)}))})}}var Vr={name:"applyStyles",enabled:!0,phase:"write",fn:Wi,effect:Hi,requires:["computeStyles"]};function H(t){return t.split("-")[0]}var te=Math.max,Te=Math.min,fe=Math.round;function We(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function it(){return!/^((?!chrome|android).)*safari/i.test(We())}function X(t,e,o){e===void 0&&(e=!1),o===void 0&&(o=!1);var r=t.getBoundingClientRect(),n=1,i=1;e&&$(t)&&(n=t.offsetWidth>0&&fe(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&fe(r.height)/t.offsetHeight||1);var s=G(t)?E(t):window,a=s.visualViewport,l=!it()&&o,p=(r.left+(l&&a?a.offsetLeft:0))/n,c=(r.top+(l&&a?a.offsetTop:0))/i,u=r.width/n,f=r.height/i;return{width:u,height:f,top:c,right:p+u,bottom:c+f,left:p,x:p,y:c}}function Pe(t){var e=X(t),o=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-o)<=1&&(o=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:o,height:r}}function st(t,e){var o=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(o&&_e(o)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function U(t){return E(t).getComputedStyle(t)}function To(t){return["table","td","th"].indexOf(W(t))>=0}function V(t){return((G(t)?t.ownerDocument:t.document)||window.document).documentElement}function de(t){return W(t)==="html"?t:t.assignedSlot||t.parentNode||(_e(t)?t.host:null)||V(t)}function jr(t){return!$(t)||U(t).position==="fixed"?null:t.offsetParent}function Vi(t){var e=/firefox/i.test(We()),o=/Trident/i.test(We());if(o&&$(t)){var r=U(t);if(r.position==="fixed")return null}var n=de(t);for(_e(n)&&(n=n.host);$(n)&&["html","body"].indexOf(W(n))<0;){var i=U(n);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return n;n=n.parentNode}return null}function oe(t){for(var e=E(t),o=jr(t);o&&To(o)&&U(o).position==="static";)o=jr(o);return o&&(W(o)==="html"||W(o)==="body"&&U(o).position==="static")?e:o||Vi(t)||e}function Se(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ce(t,e,o){return te(t,Te(e,o))}function Yr(t,e,o){var r=Ce(t,e,o);return r>o?o:r}function at(){return{top:0,right:0,bottom:0,left:0}}function lt(t){return Object.assign({},at(),t)}function ct(t,e){return e.reduce(function(o,r){return o[r]=t,o},{})}var ji=function(e,o){return e=typeof e=="function"?e(Object.assign({},o.rects,{placement:o.placement})):e,lt(typeof e!="number"?e:ct(e,ge))};function Yi(t){var e,o=t.state,r=t.name,n=t.options,i=o.elements.arrow,s=o.modifiersData.popperOffsets,a=H(o.placement),l=Se(a),p=[M,F].indexOf(a)>=0,c=p?"height":"width";if(!(!i||!s)){var u=ji(n.padding,o),f=Pe(i),m=l==="y"?L:M,d=l==="y"?B:F,h=o.rects.reference[c]+o.rects.reference[l]-s[l]-o.rects.popper[c],g=s[l]-o.rects.reference[l],y=oe(i),T=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,k=h/2-g/2,w=u[m],S=T-f[c]-u[d],P=T/2-f[c]/2+k,x=Ce(w,P,S),A=l;o.modifiersData[r]=(e={},e[A]=x,e.centerOffset=x-P,e)}}function Ki(t){var e=t.state,o=t.options,r=o.element,n=r===void 0?"[data-popper-arrow]":r;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||st(e.elements.popper,n)&&(e.elements.arrow=n))}var Kr={name:"arrow",enabled:!0,phase:"main",fn:Yi,effect:Ki,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function J(t){return t.split("-")[1]}var Ui={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zi(t,e){var o=t.x,r=t.y,n=e.devicePixelRatio||1;return{x:fe(o*n)/n||0,y:fe(r*n)/n||0}}function Ur(t){var e,o=t.popper,r=t.popperRect,n=t.placement,i=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,p=t.adaptive,c=t.roundOffsets,u=t.isFixed,f=s.x,m=f===void 0?0:f,d=s.y,h=d===void 0?0:d,g=typeof c=="function"?c({x:m,y:h}):{x:m,y:h};m=g.x,h=g.y;var y=s.hasOwnProperty("x"),T=s.hasOwnProperty("y"),k=M,w=L,S=window;if(p){var P=oe(o),x="clientHeight",A="clientWidth";if(P===E(o)&&(P=V(o),U(P).position!=="static"&&a==="absolute"&&(x="scrollHeight",A="scrollWidth")),P=P,n===L||(n===M||n===F)&&i===ke){w=B;var C=u&&P===S&&S.visualViewport?S.visualViewport.height:P[x];h-=C-r.height,h*=l?1:-1}if(n===M||(n===L||n===B)&&i===ke){k=F;var I=u&&P===S&&S.visualViewport?S.visualViewport.width:P[A];m-=I-r.width,m*=l?1:-1}}var N=Object.assign({position:a},p&&Ui),_=c===!0?zi({x:m,y:h},E(o)):{x:m,y:h};if(m=_.x,h=_.y,l){var j;return Object.assign({},N,(j={},j[w]=T?"0":"",j[k]=y?"0":"",j.transform=(S.devicePixelRatio||1)<=1?"translate("+m+"px, "+h+"px)":"translate3d("+m+"px, "+h+"px, 0)",j))}return Object.assign({},N,(e={},e[w]=T?h+"px":"",e[k]=y?m+"px":"",e.transform="",e))}function qi(t){var e=t.state,o=t.options,r=o.gpuAcceleration,n=r===void 0?!0:r,i=o.adaptive,s=i===void 0?!0:i,a=o.roundOffsets,l=a===void 0?!0:a,p={placement:H(e.placement),variation:J(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Ur(Object.assign({},p,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Ur(Object.assign({},p,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var zr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:qi,data:{}};var It={passive:!0};function Qi(t){var e=t.state,o=t.instance,r=t.options,n=r.scroll,i=n===void 0?!0:n,s=r.resize,a=s===void 0?!0:s,l=E(e.elements.popper),p=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&p.forEach(function(c){c.addEventListener("scroll",o.update,It)}),a&&l.addEventListener("resize",o.update,It),function(){i&&p.forEach(function(c){c.removeEventListener("scroll",o.update,It)}),a&&l.removeEventListener("resize",o.update,It)}}var qr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Qi,data:{}};var Gi={left:"right",right:"left",bottom:"top",top:"bottom"};function He(t){return t.replace(/left|right|bottom|top/g,function(e){return Gi[e]})}var Xi={start:"end",end:"start"};function Lt(t){return t.replace(/start|end/g,function(e){return Xi[e]})}function Ae(t){var e=E(t),o=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:o,scrollTop:r}}function Ee(t){return X(V(t)).left+Ae(t).scrollLeft}function Po(t,e){var o=E(t),r=V(t),n=o.visualViewport,i=r.clientWidth,s=r.clientHeight,a=0,l=0;if(n){i=n.width,s=n.height;var p=it();(p||!p&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:i,height:s,x:a+Ee(t),y:l}}function So(t){var e,o=V(t),r=Ae(t),n=(e=t.ownerDocument)==null?void 0:e.body,i=te(o.scrollWidth,o.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),s=te(o.scrollHeight,o.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-r.scrollLeft+Ee(t),l=-r.scrollTop;return U(n||o).direction==="rtl"&&(a+=te(o.clientWidth,n?n.clientWidth:0)-i),{width:i,height:s,x:a,y:l}}function Oe(t){var e=U(t),o=e.overflow,r=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(o+n+r)}function Mt(t){return["html","body","#document"].indexOf(W(t))>=0?t.ownerDocument.body:$(t)&&Oe(t)?t:Mt(de(t))}function ye(t,e){var o;e===void 0&&(e=[]);var r=Mt(t),n=r===((o=t.ownerDocument)==null?void 0:o.body),i=E(r),s=n?[i].concat(i.visualViewport||[],Oe(r)?r:[]):r,a=e.concat(s);return n?a:a.concat(ye(de(s)))}function Ve(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ji(t,e){var o=X(t,!1,e==="fixed");return o.top=o.top+t.clientTop,o.left=o.left+t.clientLeft,o.bottom=o.top+t.clientHeight,o.right=o.left+t.clientWidth,o.width=t.clientWidth,o.height=t.clientHeight,o.x=o.left,o.y=o.top,o}function Qr(t,e,o){return e===Et?Ve(Po(t,o)):G(e)?Ji(e,o):Ve(So(V(t)))}function Zi(t){var e=ye(de(t)),o=["absolute","fixed"].indexOf(U(t).position)>=0,r=o&&$(t)?oe(t):t;return G(r)?e.filter(function(n){return G(n)&&st(n,r)&&W(n)!=="body"}):[]}function Co(t,e,o,r){var n=e==="clippingParents"?Zi(t):[].concat(e),i=[].concat(n,[o]),s=i[0],a=i.reduce(function(l,p){var c=Qr(t,p,r);return l.top=te(c.top,l.top),l.right=Te(c.right,l.right),l.bottom=Te(c.bottom,l.bottom),l.left=te(c.left,l.left),l},Qr(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function pt(t){var e=t.reference,o=t.element,r=t.placement,n=r?H(r):null,i=r?J(r):null,s=e.x+e.width/2-o.width/2,a=e.y+e.height/2-o.height/2,l;switch(n){case L:l={x:s,y:e.y-o.height};break;case B:l={x:s,y:e.y+e.height};break;case F:l={x:e.x+e.width,y:a};break;case M:l={x:e.x-o.width,y:a};break;default:l={x:e.x,y:e.y}}var p=n?Se(n):null;if(p!=null){var c=p==="y"?"height":"width";switch(i){case ue:l[p]=l[p]-(e[c]/2-o[c]/2);break;case ke:l[p]=l[p]+(e[c]/2-o[c]/2);break;default:}}return l}function re(t,e){e===void 0&&(e={});var o=e,r=o.placement,n=r===void 0?t.placement:r,i=o.strategy,s=i===void 0?t.strategy:i,a=o.boundary,l=a===void 0?_r:a,p=o.rootBoundary,c=p===void 0?Et:p,u=o.elementContext,f=u===void 0?$e:u,m=o.altBoundary,d=m===void 0?!1:m,h=o.padding,g=h===void 0?0:h,y=lt(typeof g!="number"?g:ct(g,ge)),T=f===$e?Wr:$e,k=t.rects.popper,w=t.elements[d?T:f],S=Co(G(w)?w:w.contextElement||V(t.elements.popper),l,c,s),P=X(t.elements.reference),x=pt({reference:P,element:k,strategy:"absolute",placement:n}),A=Ve(Object.assign({},k,x)),C=f===$e?A:P,I={top:S.top-C.top+y.top,bottom:C.bottom-S.bottom+y.bottom,left:S.left-C.left+y.left,right:C.right-S.right+y.right},N=t.modifiersData.offset;if(f===$e&&N){var _=N[n];Object.keys(I).forEach(function(j){var D=[F,B].indexOf(j)>=0?1:-1,Q=[L,B].indexOf(j)>=0?"y":"x";I[j]+=_[Q]*D})}return I}function Ao(t,e){e===void 0&&(e={});var o=e,r=o.placement,n=o.boundary,i=o.rootBoundary,s=o.padding,a=o.flipVariations,l=o.allowedAutoPlacements,p=l===void 0?Ot:l,c=J(r),u=c?a?ko:ko.filter(function(d){return J(d)===c}):ge,f=u.filter(function(d){return p.indexOf(d)>=0});f.length===0&&(f=u);var m=f.reduce(function(d,h){return d[h]=re(t,{placement:h,boundary:n,rootBoundary:i,padding:s})[H(h)],d},{});return Object.keys(m).sort(function(d,h){return m[d]-m[h]})}function es(t){if(H(t)===At)return[];var e=He(t);return[Lt(t),e,Lt(e)]}function ts(t){var e=t.state,o=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var n=o.mainAxis,i=n===void 0?!0:n,s=o.altAxis,a=s===void 0?!0:s,l=o.fallbackPlacements,p=o.padding,c=o.boundary,u=o.rootBoundary,f=o.altBoundary,m=o.flipVariations,d=m===void 0?!0:m,h=o.allowedAutoPlacements,g=e.options.placement,y=H(g),T=y===g,k=l||(T||!d?[He(g)]:es(g)),w=[g].concat(k).reduce(function(Le,me){return Le.concat(H(me)===At?Ao(e,{placement:me,boundary:c,rootBoundary:u,padding:p,flipVariations:d,allowedAutoPlacements:h}):me)},[]),S=e.rects.reference,P=e.rects.popper,x=new Map,A=!0,C=w[0],I=0;I<w.length;I++){var N=w[I],_=H(N),j=J(N)===ue,D=[L,B].indexOf(_)>=0,Q=D?"width":"height",Y=re(e,{placement:N,boundary:c,rootBoundary:u,altBoundary:f,padding:p}),Z=D?j?F:M:j?B:L;S[Q]>P[Q]&&(Z=He(Z));var mt=He(Z),ve=[];if(i&&ve.push(Y[_]<=0),a&&ve.push(Y[Z]<=0,Y[mt]<=0),ve.every(function(Le){return Le})){C=N,A=!1;break}x.set(N,ve)}if(A)for(var ht=d?3:1,_t=function(me){var Ke=w.find(function(yt){var we=x.get(yt);if(we)return we.slice(0,me).every(function(Wt){return Wt})});if(Ke)return C=Ke,"break"},Ye=ht;Ye>0;Ye--){var gt=_t(Ye);if(gt==="break")break}e.placement!==C&&(e.modifiersData[r]._skip=!0,e.placement=C,e.reset=!0)}}var Gr={name:"flip",enabled:!0,phase:"main",fn:ts,requiresIfExists:["offset"],data:{_skip:!1}};function Xr(t,e,o){return o===void 0&&(o={x:0,y:0}),{top:t.top-e.height-o.y,right:t.right-e.width+o.x,bottom:t.bottom-e.height+o.y,left:t.left-e.width-o.x}}function Jr(t){return[L,F,B,M].some(function(e){return t[e]>=0})}function os(t){var e=t.state,o=t.name,r=e.rects.reference,n=e.rects.popper,i=e.modifiersData.preventOverflow,s=re(e,{elementContext:"reference"}),a=re(e,{altBoundary:!0}),l=Xr(s,r),p=Xr(a,n,i),c=Jr(l),u=Jr(p);e.modifiersData[o]={referenceClippingOffsets:l,popperEscapeOffsets:p,isReferenceHidden:c,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":u})}var Zr={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:os};function rs(t,e,o){var r=H(t),n=[M,L].indexOf(r)>=0?-1:1,i=typeof o=="function"?o(Object.assign({},e,{placement:t})):o,s=i[0],a=i[1];return s=s||0,a=(a||0)*n,[M,F].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function ns(t){var e=t.state,o=t.options,r=t.name,n=o.offset,i=n===void 0?[0,0]:n,s=Ot.reduce(function(c,u){return c[u]=rs(u,e.rects,i),c},{}),a=s[e.placement],l=a.x,p=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=p),e.modifiersData[r]=s}var en={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ns};function is(t){var e=t.state,o=t.name;e.modifiersData[o]=pt({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var tn={name:"popperOffsets",enabled:!0,phase:"read",fn:is,data:{}};function Eo(t){return t==="x"?"y":"x"}function ss(t){var e=t.state,o=t.options,r=t.name,n=o.mainAxis,i=n===void 0?!0:n,s=o.altAxis,a=s===void 0?!1:s,l=o.boundary,p=o.rootBoundary,c=o.altBoundary,u=o.padding,f=o.tether,m=f===void 0?!0:f,d=o.tetherOffset,h=d===void 0?0:d,g=re(e,{boundary:l,rootBoundary:p,padding:u,altBoundary:c}),y=H(e.placement),T=J(e.placement),k=!T,w=Se(y),S=Eo(w),P=e.modifiersData.popperOffsets,x=e.rects.reference,A=e.rects.popper,C=typeof h=="function"?h(Object.assign({},e.rects,{placement:e.placement})):h,I=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,_={x:0,y:0};if(P){if(i){var j,D=w==="y"?L:M,Q=w==="y"?B:F,Y=w==="y"?"height":"width",Z=P[w],mt=Z+g[D],ve=Z-g[Q],ht=m?-A[Y]/2:0,_t=T===ue?x[Y]:A[Y],Ye=T===ue?-A[Y]:-x[Y],gt=e.elements.arrow,Le=m&&gt?Pe(gt):{width:0,height:0},me=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:at(),Ke=me[D],yt=me[Q],we=Ce(0,x[Y],Le[Y]),Wt=k?x[Y]/2-ht-we-Ke-I.mainAxis:_t-we-Ke-I.mainAxis,un=k?-x[Y]/2+ht+we+yt+I.mainAxis:Ye+we+yt+I.mainAxis,Ht=e.elements.arrow&&oe(e.elements.arrow),fn=Ht?w==="y"?Ht.clientTop||0:Ht.clientLeft||0:0,$o=(j=N==null?void 0:N[w])!=null?j:0,dn=Z+Wt-$o-fn,mn=Z+un-$o,_o=Ce(m?Te(mt,dn):mt,Z,m?te(ve,mn):ve);P[w]=_o,_[w]=_o-Z}if(a){var Wo,hn=w==="x"?L:M,gn=w==="x"?B:F,be=P[S],vt=S==="y"?"height":"width",Ho=be+g[hn],Vo=be-g[gn],Vt=[L,M].indexOf(y)!==-1,jo=(Wo=N==null?void 0:N[S])!=null?Wo:0,Yo=Vt?Ho:be-x[vt]-A[vt]-jo+I.altAxis,Ko=Vt?be+x[vt]+A[vt]-jo-I.altAxis:Vo,Uo=m&&Vt?Yr(Yo,be,Ko):Ce(m?Yo:Ho,be,m?Ko:Vo);P[S]=Uo,_[S]=Uo-be}e.modifiersData[r]=_}}var on={name:"preventOverflow",enabled:!0,phase:"main",fn:ss,requiresIfExists:["offset"]};function Oo(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Io(t){return t===E(t)||!$(t)?Ae(t):Oo(t)}function as(t){var e=t.getBoundingClientRect(),o=fe(e.width)/t.offsetWidth||1,r=fe(e.height)/t.offsetHeight||1;return o!==1||r!==1}function Lo(t,e,o){o===void 0&&(o=!1);var r=$(e),n=$(e)&&as(e),i=V(e),s=X(t,n,o),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!o)&&((W(e)!=="body"||Oe(i))&&(a=Io(e)),$(e)?(l=X(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=Ee(i))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function ls(t){var e=new Map,o=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function n(i){o.add(i.name);var s=[].concat(i.requires||[],i.requiresIfExists||[]);s.forEach(function(a){if(!o.has(a)){var l=e.get(a);l&&n(l)}}),r.push(i)}return t.forEach(function(i){o.has(i.name)||n(i)}),r}function Mo(t){var e=ls(t);return Hr.reduce(function(o,r){return o.concat(e.filter(function(n){return n.phase===r}))},[])}function No(t){var e;return function(){return e||(e=new Promise(function(o){Promise.resolve().then(function(){e=void 0,o(t())})})),e}}function Fo(t){var e=t.reduce(function(o,r){var n=o[r.name];return o[r.name]=n?Object.assign({},n,r,{options:Object.assign({},n.options,r.options),data:Object.assign({},n.data,r.data)}):r,o},{});return Object.keys(e).map(function(o){return e[o]})}var rn={placement:"bottom",modifiers:[],strategy:"absolute"};function nn(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function sn(t){t===void 0&&(t={});var e=t,o=e.defaultModifiers,r=o===void 0?[]:o,n=e.defaultOptions,i=n===void 0?rn:n;return function(a,l,p){p===void 0&&(p=i);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},rn,i),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},u=[],f=!1,m={state:c,setOptions:function(y){var T=typeof y=="function"?y(c.options):y;h(),c.options=Object.assign({},i,c.options,T),c.scrollParents={reference:G(a)?ye(a):a.contextElement?ye(a.contextElement):[],popper:ye(l)};var k=Mo(Fo([].concat(r,c.options.modifiers)));return c.orderedModifiers=k.filter(function(w){return w.enabled}),d(),m.update()},forceUpdate:function(){if(!f){var y=c.elements,T=y.reference,k=y.popper;if(nn(T,k)){c.rects={reference:Lo(T,oe(k),c.options.strategy==="fixed"),popper:Pe(k)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(I){return c.modifiersData[I.name]=Object.assign({},I.data)});for(var w=0;w<c.orderedModifiers.length;w++){if(c.reset===!0){c.reset=!1,w=-1;continue}var S=c.orderedModifiers[w],P=S.fn,x=S.options,A=x===void 0?{}:x,C=S.name;typeof P=="function"&&(c=P({state:c,options:A,name:C,instance:m})||c)}}}},update:No(function(){return new Promise(function(g){m.forceUpdate(),g(c)})}),destroy:function(){h(),f=!0}};if(!nn(a,l))return m;m.setOptions(p).then(function(g){!f&&p.onFirstUpdate&&p.onFirstUpdate(g)});function d(){c.orderedModifiers.forEach(function(g){var y=g.name,T=g.options,k=T===void 0?{}:T,w=g.effect;if(typeof w=="function"){var S=w({state:c,name:y,instance:m,options:k}),P=function(){};u.push(S||P)}})}function h(){u.forEach(function(g){return g()}),u=[]}return m}}var cs=[qr,tn,zr,Vr,en,Gr,on,Kr,Zr],Do=sn({defaultModifiers:cs});var an=require("obsidian"),ps=(t,e)=>(t%e+e)%e,Ro=class{constructor(e,o,r){this.owner=e,this.containerEl=o,o.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),o.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),r.register([],"ArrowUp",n=>{if(!n.isComposing)return this.setSelectedItem(this.selectedItem-1,!0),!1}),r.register([],"ArrowDown",n=>{if(!n.isComposing)return this.setSelectedItem(this.selectedItem+1,!0),!1}),r.register([],"Enter",n=>{if(!n.isComposing)return this.useSelectedItem(n),!1})}onSuggestionClick(e,o){e.preventDefault();let r=this.suggestions.indexOf(o);this.setSelectedItem(r,!1),this.useSelectedItem(e)}onSuggestionMouseover(e,o){let r=this.suggestions.indexOf(o);this.setSelectedItem(r,!1)}setSuggestions(e){this.containerEl.empty();let o=[];e.forEach(r=>{let n=this.containerEl.createDiv("suggestion-item");this.owner.renderSuggestion(r,n),o.push(n)}),this.values=e,this.suggestions=o,this.setSelectedItem(0,!1)}useSelectedItem(e){let o=this.values[this.selectedItem];o&&this.owner.selectSuggestion(o,e)}setSelectedItem(e,o){let r=ps(e,this.suggestions.length),n=this.suggestions[this.selectedItem],i=this.suggestions[r];n==null||n.removeClass("is-selected"),i==null||i.addClass("is-selected"),this.selectedItem=r,o&&i.scrollIntoView(!1)}},Nt=class{constructor(e,o){this.app=e,this.inputEl=o,this.scope=new an.Scope,this.suggestEl=createDiv("suggestion-container");let r=this.suggestEl.createDiv("suggestion");this.suggest=new Ro(this,r,this.scope),this.scope.register([],"Escape",this.close.bind(this)),this.inputEl.addEventListener("input",this.onInputChanged.bind(this)),this.inputEl.addEventListener("focus",this.onInputChanged.bind(this)),this.inputEl.addEventListener("blur",this.close.bind(this)),this.suggestEl.on("mousedown",".suggestion-container",n=>{n.preventDefault()})}onInputChanged(){let e=this.inputEl.value,o=this.getSuggestions(e);if(!o){this.close();return}o.length>0?(this.suggest.setSuggestions(o),this.open(this.app.dom.appContainerEl,this.inputEl)):this.close()}open(e,o){this.app.keymap.pushScope(this.scope),e.appendChild(this.suggestEl),this.popper=Do(o,this.suggestEl,{placement:"bottom-start",modifiers:[{name:"sameWidth",enabled:!0,fn:({state:r,instance:n})=>{let i=`${r.rects.reference.width}px`;r.styles.popper.width!==i&&(r.styles.popper.width=i,n.update())},phase:"beforeWrite",requires:["computeStyles"]}]})}close(){this.app.keymap.popScope(this.scope),this.suggest.setSuggestions([]),this.popper&&this.popper.destroy(),this.suggestEl.detach()}};var us=new RegExp(/\[\[([^\]]*)$/),fs=new RegExp(/#([^ ]*)$/),Ft=class extends Nt{constructor(o,r){super(o,r);this.app=o;this.inputEl=r;this.lastInput="";this.files=o.vault.getMarkdownFiles(),this.unresolvedLinkNames=this.getUnresolvedLinkNames(o),this.tags=Object.keys(o.metadataCache.getTags())}getSuggestions(o){let r=this.inputEl.selectionStart,n=o.substr(0,r),i=us.exec(n),s=fs.exec(n),a=[];if(s){let p=s[1];this.lastInput=p,this.lastInputType=0,a=this.tags.filter(c=>c.toLowerCase().contains(p.toLowerCase()))}if(i){let p=i[1];this.lastInput=p,this.lastInputType=1,a=this.files.filter(c=>c.path.toLowerCase().contains(p.toLowerCase())).map(c=>c.path),a.push(...this.unresolvedLinkNames.filter(c=>c.toLowerCase().contains(p.toLowerCase())))}return new pe(a,{findAllMatches:!0,threshold:.8}).search(this.lastInput).map(p=>p.item)}renderSuggestion(o,r){o&&r.setText(o)}selectSuggestion(o){let r=this.inputEl.selectionStart,n=this.lastInput.length,i=this.inputEl.value,s=0;if(this.lastInputType===1){let a=this.app.vault.getAbstractFileByPath(o);a instanceof ln.TFile?s=this.makeLinkObsidianMethod(a,i,r,n):s=this.makeLinkManually(i,o.replace(/.md$/,""),r,n)}this.lastInputType===0&&(this.inputEl.value=this.getNewInputValueForTag(i,o,r,n),s=r-n+o.length-1),this.inputEl.trigger("input"),this.close(),this.inputEl.setSelectionRange(s,s)}makeLinkObsidianMethod(o,r,n,i){let s=this.app.fileManager.generateMarkdownLink(o,"");return this.inputEl.value=this.getNewInputValueForFileLink(r,s,n,i),n-i+s.length+2}makeLinkManually(o,r,n,i){return this.inputEl.value=this.getNewInputValueForFileName(o,r,n,i),n-i+r.length+2}getNewInputValueForFileLink(o,r,n,i){return`${o.substr(0,n-i-2)}${r}${o.substr(n)}`}getNewInputValueForFileName(o,r,n,i){return`${o.substr(0,n-i)}${r}]]${o.substr(n)}`}getNewInputValueForTag(o,r,n,i){return`${o.substr(0,n-i-1)}${r}${o.substr(n)}`}getUnresolvedLinkNames(o){let r=o.metadataCache.unresolvedLinks,n=new Set;for(let i in r)for(let s in r[i])n.add(s);return Array.from(n)}};var ut=class extends Ie.Modal{constructor(e){super(e.app),this.plugin=e}async submitForm(e){e.trim().length!==0&&(Be(this.plugin,!0,e),this.close())}onOpen(){let e="";this.titleEl.createEl("div","Quick Capture").setText("Quick Capture"),this.contentEl.createEl("form",{},o=>{new Ie.Setting(o).addTextArea(r=>{r.onChange(n=>e=n),r.inputEl.rows=6,Ie.Platform.isIosApp?r.inputEl.style.width="100%":Ie.Platform.isDesktopApp&&(r.inputEl.rows=10,r.inputEl.cols=100),r.inputEl.addEventListener("keydown",async n=>{(n.ctrlKey||n.metaKey)&&n.key==="Enter"&&(n.preventDefault(),await this.submitForm(e))}),window.setTimeout(()=>r.inputEl.focus(),10),this.suggester=new Ft(this.plugin.app,r.inputEl)}),o.createDiv("modal-button-container",r=>{r.createEl("button",{attr:{type:"submit"},cls:"mod-cta",text:"Capture"}).addEventListener("click",async n=>{n.preventDefault(),await this.submitForm(e)})})})}};var ft=class{constructor(e){this.commands=[{caption:"Quick Capture",shortcut:"QC",group:"QuickCapture",editModeOnly:!1,isContextMenuItem:!1,cmItemEnabled:!1,icon:"highlight-glyph",command:async()=>new ut(this.plugin).open()},{caption:"Select current line/expand to block",shortcut:"SB",group:"Selection",editModeOnly:!0,isContextMenuItem:!1,cmItemEnabled:!1,icon:"highlight-glyph",command:async()=>Go(this.plugin)},{caption:"Select block - previous",shortcut:"BP",group:"Selection",editModeOnly:!0,isContextMenuItem:!1,cmItemEnabled:!1,icon:"highlight-glyph",command:async()=>jt(this.plugin,!1)},{caption:"Select block - next",shortcut:"BN",group:"Selection",editModeOnly:!0,isContextMenuItem:!1,cmItemEnabled:!1,icon:"highlight-glyph",command:async()=>jt(this.plugin,!0)},{caption:"Select current line/expand up into previous block",group:"Selection",shortcut:"SP",editModeOnly:!0,isContextMenuItem:!1,cmItemEnabled:!1,icon:"highlight-glyph",command:async()=>Yt(this.plugin,!0)},{caption:"Select current line/expand down into next block",group:"Selection",shortcut:"SN",editModeOnly:!0,isContextMenuItem:!1,cmItemEnabled:!1,icon:"highlight-glyph",command:async()=>Yt(this.plugin,!1)},{caption:"Replace link with text",shortcut:"RLT",group:"replace",editModeOnly:!0,isContextMenuItem:!0,cmItemEnabled:!0,icon:"lines-of-text",command:async()=>{let e=rt(this.plugin);e?await io(this.plugin,e,!1):new je.Notice("No link selected in editor.")}},{caption:"Replace link with text & alias",shortcut:"RLA",group:"replace",editModeOnly:!0,isContextMenuItem:!0,cmItemEnabled:!0,icon:"lines-of-text",command:async()=>{let e=rt(this.plugin);e?await io(this.plugin,e,!0):new je.Notice("No link selected in editor.")}},{caption:"Copy block embeds from this selection",shortcut:"CC",group:"block",editModeOnly:!0,isContextMenuItem:!0,cmItemEnabled:!0,icon:"blocks",command:async()=>xt(this.plugin,!0)},{caption:"Copy block embeds as an alias",shortcut:"CA",group:"block",editModeOnly:!0,isContextMenuItem:!0,cmItemEnabled:!0,icon:"blocks",command:async()=>await xt(this.plugin,!0,!0,this.plugin.settings.blockRefAliasIndicator)},{caption:"Copy line/selection to another file",shortcut:"CLT",group:"ToFile",editModeOnly:!0,isContextMenuItem:!0,cmItemEnabled:!0,icon:"left-arrow-with-tail",command:async()=>Be(this.plugin,!0)},{caption:"Push line/selection to another file",shortcut:"PLT",group:"ToFile",editModeOnly:!0,isContextMenuItem:!0,cmItemEnabled:!0,icon:"left-arrow-with-tail",command:async()=>Be(this.plugin,!1)},{caption:"Push line/selection to another file as a block embed",shortcut:"PLB",group:"ToFile",editModeOnly:!0,isContextMenuItem:!0,cmItemEnabled:!0,icon:"left-arrow-with-tail",command:async()=>kr(this.plugin)},{caption:"Send link of current note to a file",shortcut:"SLF",editModeOnly:!0,group:"Send",isContextMenuItem:!0,cmItemEnabled:!0,icon:"paper-plane",command:async()=>ro(this.plugin,!1)},{caption:"Send link of current note to the Clipboard",shortcut:"SLC",editModeOnly:!0,group:"Send",isContextMenuItem:!0,cmItemEnabled:!0,icon:"paper-plane",command:async()=>ro(this.plugin,!0)},{caption:"Copy line(s) from another file",shortcut:"CLF",editModeOnly:!0,group:"FromFile",isContextMenuItem:!0,cmItemEnabled:!0,icon:"right-arrow-with-tail",command:async()=>no(this.plugin,!0)},{caption:"Pull line(s) from another file",shortcut:"LLF",editModeOnly:!0,group:"FromFile",isContextMenuItem:!0,cmItemEnabled:!0,icon:"right-arrow-with-tail",command:async()=>no(this.plugin,!1)},{caption:"Pull Line(s) from another file as block embeds",shortcut:"LLB",group:"FromFile",editModeOnly:!0,isContextMenuItem:!0,cmItemEnabled:!0,icon:"right-arrow-with-tail",command:async()=>Tr(this.plugin)},{caption:"Add a New Bookmark from this file",shortcut:"BA",group:"Bookmarks",editModeOnly:!0,isContextMenuItem:!0,cmItemEnabled:!0,icon:"go-to-file",command:async()=>Sr(this.plugin)},{caption:"Open a bookmarked file",shortcut:"BO",group:"Bookmarks",editModeOnly:!1,isContextMenuItem:!1,cmItemEnabled:!1,icon:"go-to-file",command:async()=>await Ar(this.plugin)},{caption:"Remove a Bookmark",shortcut:"BR",group:"Bookmarks",editModeOnly:!0,isContextMenuItem:!1,cmItemEnabled:!1,icon:"go-to-file",command:async()=>Cr(this.plugin)}];this.plugin=e,this.plugin.addCommand({id:"combinedCommands",name:"All Commands List",icon:"TextTransporter",callback:async()=>{await this.masterControlProgram(this.plugin)}});for(let o=0;o<this.commands.length;o++)this.plugin.settings[`cMenuEnabled-${this.commands[o].shortcut}`]!==void 0&&(this.commands[o].cmItemEnabled=this.plugin.settings[`cMenuEnabled-${this.commands[o].shortcut}`]);this.plugin.registerEvent(this.plugin.app.workspace.on("editor-menu",o=>{o.addSeparator();for(let n of this.commands){let i=!1;(n.cmItemEnabled===!0&&n.group!=="replace"||n.cmItemEnabled===!0&&n.group==="replace"&&rt(this.plugin))&&(i=!0),i&&o.addItem(s=>{s.setTitle(n.caption).setIcon(n.icon).onClick(async()=>{await n.command()})})}let r=e.settings.bookmarks.split(`
`);if(r.length>0){o.addSeparator();for(let n of r)if(n.substr(0,1)==="*"){let i=(n.length>=40?`${n.substr(0,40)}...`:n).replace("*","");o.addItem(s=>{s.setTitle(`Copy to: ${i}`).setIcon("star-list").onClick(async a=>await ot(e,!0,n,a))}),o.addItem(s=>{s.setTitle(`Push to: ${i}`).onClick(async a=>await ot(e,!1,n,a))})}}o.addSeparator()}));for(let o of Object.values(this.commands))o.editModeOnly?this.plugin.addCommand({id:o.shortcut,icon:o.icon,name:`${o.caption} (${o.shortcut})`,editorCallback:o.command}):this.plugin.addCommand({id:o.shortcut,icon:o.icon,name:`${o.caption} (${o.shortcut})`,callback:o.command})}async reloadPlugin(){new je.Notice(`Reloading plugin: ${this.plugin.APP_NAME}`),await app.plugins.disablePlugin("obsidian42-text-transporter"),await app.plugins.enablePlugin("obsidian42-text-transporter")}async masterControlProgram(e){let o=this.plugin.app.workspace.getActiveViewOfType(je.MarkdownView),r=!0;(!o||o.getMode()!=="source")&&(r=!1);let n=new K(this.plugin),i=[];for(let s of this.commands){let a=bt(e),l=!1;(s.group==="replace"&&a===0&&rt(this.plugin)||s.group!=="replace"&&(s.editModeOnly===!1||r&&s.editModeOnly)||(s.shortcut==="SLF"||s.shortcut==="SLC")&&a!==2)&&(l=!0),l&&i.push({display:`${s.caption} (${s.shortcut})`,info:s.command})}if(r)for(let s of e.settings.bookmarks.split(`
`))s.substr(0,1)==="*"&&(i.push({display:`Copy to: ${s}`,info:async a=>{await ot(e,!0,s,a)}}),i.push({display:`   Push: ${s}`,info:async a=>{await ot(e,!1,s,a)}}));n.setSuggesterData(i),n.display(async(s,a)=>s.info(a))}};var ne=require("obsidian"),Dt=class extends ne.PluginSettingTab{constructor(e,o){super(e,o),this.plugin=o}display(){let{containerEl:e}=this;e.empty(),new ne.Setting(e).setName("Alias placeholder").setDesc("Placeholder text used for an aliased block reference.").addText(r=>r.setValue(this.plugin.settings.blockRefAliasIndicator).onChange(async n=>{n.trim()===""?this.plugin.settings.blockRefAliasIndicator="*":this.plugin.settings.blockRefAliasIndicator=n,await this.plugin.saveSettings()})),new ne.Setting(e).setName("Bookmarks").setHeading(),new ne.Setting(e).setName("Bookmarks").setDesc(`Predefined destinations within files that appear at the top of the file selector. 
						Each line represents one bookmark. The line starts with the path to the file (ex: directory1/subdirectory/filename.md) 
						If just the file path is provided, the file contents will be shown for insertion.
						If after the file name there is a semicolon followed by either: TOP BOTTOM or text to find in the document as an insertion point. Example:

						directory1/subdirectory/filename1.md;TOP  directory1/subdirectory/filename2.md;BOTTOM  directory1/subdirectory/filename3.md;# Inbox
						Optionally DNPTODAY or DNPTOMORROW can be used in the place of a file name to default to today's or tomorrows Daily Notes Page.
						`).addTextArea(r=>{r.setPlaceholder(` directory1/subdirectory/filename1.md;
 directory1/subdirectory/filename2.md;TOP
 directory1/subdirectory/filename3.md;BOTTOM
 directory1/subdirectory/filename4.md;# Inbox`).setValue(this.plugin.settings.bookmarks||"").onChange(n=>{this.plugin.settings.bookmarks=n,this.plugin.saveData(this.plugin.settings)}),r.inputEl.rows=6,ne.Platform.isIosApp?r.inputEl.style.width="100%":ne.Platform.isDesktopApp&&(r.inputEl.rows=15,r.inputEl.cols=120)});let o=document.createDocumentFragment();o.append(o.createEl("a",{href:"https://tfthacker.com/Obsidian+Plugins+by+TfTHacker/Text+Transporter/Bookmarks+in+Text+Transporter",text:"Additional documentation  for bookmarks."})),e.createEl("div",{text:""}).append(o),new ne.Setting(e).setName("Context menu commands: enable/disable").setHeading();for(let r of this.plugin.commands.commands)new ne.Setting(e).setName(r.caption).addToggle(n=>{n.setValue(r.cmItemEnabled),n.onChange(async i=>{r.cmItemEnabled=i,this.plugin.settings[`cMenuEnabled-${r.shortcut}`]=i,await this.plugin.saveSettings()})})}};var Rt=require("obsidian");function ds(t,e){for(let o of e)if(t.startsWith(`${o}/`))return!0;return!1}async function Bo(t,e,o,r){if(e===2||e===3)for(let n of t.vault.getMarkdownFiles())ds(n.path,r)||o.push({display:n.path,info:n.path});(e===1||e===3)&&Rt.Vault.recurseChildren(t.vault.getRoot(),n=>{if(n instanceof Rt.TFolder){let i=n.path==="/"?n.path:`${n.path}/`;o.push({display:i,info:i})}})}async function cn(t,e){let o=t.workspace.getLastOpenFiles();if(o.length!==0){for(let r=0;r<o.length;r++)await t.vault.adapter.exists(o[r])===!1&&o.splice(r,1);for(let r=0;r<o.length;r++){let n=o[r];for(let i=0;i<e.length;i++)if(n===e[i].info){e.splice(i,1);break}}for(let r=o.length-1;r>=0;r--)e.unshift({display:`Recent file: ${o[r]}`,info:o[r]})}}var dt=class{constructor(e){this.exclusionFolders=[];this.plugin=e}setExclusionFolders(e){this.exclusionFolders=e}async getAllFolders(){let e=[];return await Bo(this.plugin.app,1,e,this.exclusionFolders),e}async getAllFiles(){let e=[];return await Bo(this.plugin.app,2,e,this.exclusionFolders),await cn(this.plugin.app,e),e}async getAllFoldersAndFiles(){let e=[];return await Bo(this.plugin.app,3,e,this.exclusionFolders),await cn(this.plugin.app,e),e}};var Bt=class extends $t.Plugin{constructor(){super(...arguments);this.APP_NAME=this.manifest.name;this.APP_ID=this.manifest.id}async onload(){console.log(`loading ${this.APP_NAME}`),this.fs=new dt(this),await this.loadSettings(),this.commands=new ft(this),pn(),this.ribbonIcon=this.addRibbonIcon("TextTransporter",this.APP_NAME,async()=>this.commands.masterControlProgram(this)),this.addSettingTab(new Dt(this.app,this))}onunload(){console.log(`unloading ${this.APP_NAME}`)}async loadSettings(){this.settings=Object.assign({},qo,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};function pn(){(0,$t.addIcon)("TextTransporter",`<path fill="currentColor" stroke="currentColor"  d="M 28.324219 21.484375 C 28.324219 25.257812 25.261719 28.320312 21.488281 28.320312 C 17.714844 28.320312 14.652344 25.257812 14.652344 21.484375 C 14.652344 17.707031 17.714844 14.648438 21.488281 14.648438 C 25.261719 14.648438 28.324219 17.707031 28.324219 21.484375 Z M 28.324219 21.484375 "/>
         <path fill="currentColor" stroke="currentColor"  d="M 36.679688 36.671875 C 40.738281 32.617188 42.972656 27.222656 42.972656 21.484375 C 42.972656 9.636719 33.335938 0 21.488281 0 C 9.644531 0 0.00390625 9.636719 0.00390625 21.484375 C 0.00390625 27.222656 2.242188 32.617188 6.296875 36.671875 L 21.488281 51.863281 Z M 8.792969 21.484375 C 8.792969 14.484375 14.488281 8.789062 21.488281 8.789062 C 28.488281 8.789062 34.183594 14.484375 34.183594 21.484375 C 34.183594 28.484375 28.488281 34.175781 21.488281 34.175781 C 14.488281 34.175781 8.792969 28.484375 8.792969 21.484375 Z M 8.792969 21.484375 "/>
         <path fill="currentColor" stroke="currentColor"  d="M 84.371094 62.28125 C 75.753906 62.28125 68.746094 69.289062 68.746094 77.902344 C 68.746094 82.078125 70.371094 86 73.320312 88.953125 L 84.371094 100 L 95.417969 88.953125 C 98.367188 86 99.992188 82.078125 99.992188 77.902344 C 99.992188 69.289062 92.984375 62.28125 84.371094 62.28125 Z M 84.371094 62.28125 "/>
         <path fill="currentColor" stroke="currentColor"  d="M 24.417969 81.132812 C 24.417969 73.96875 30.246094 68.140625 37.414062 68.140625 L 48.285156 68.140625 C 54.71875 68.140625 59.957031 62.902344 59.957031 56.464844 C 59.957031 50.027344 54.71875 44.792969 48.285156 44.792969 L 36.917969 44.792969 L 36.917969 50.652344 L 48.285156 50.652344 C 51.488281 50.652344 54.097656 53.257812 54.097656 56.464844 C 54.097656 59.671875 51.488281 62.28125 48.285156 62.28125 L 37.414062 62.28125 C 27.015625 62.28125 18.558594 70.738281 18.558594 81.132812 C 18.558594 91.53125 27.015625 99.988281 37.414062 99.988281 L 70.113281 99.988281 L 70.113281 94.128906 L 37.414062 94.128906 C 30.246094 94.128906 24.417969 88.300781 24.417969 81.132812 Z M 24.417969 81.132812 "/>`)}

/* nosourcemap */
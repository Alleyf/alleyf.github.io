# Obsidian Publisher

一键将 Obsidian 笔记发布到多个内容平台的插件。

## ✨ 特性

- 🚀 **一键发布** - 支持同时发布到多个平台
- 📱 **多平台支持** - 微信公众号、今日头条、知乎、CSDN
- 🖼️ **智能图片处理** - 自动上传图片到对应平台
- 📝 **Markdown 支持** - 完整的 Markdown 语法支持
- 🎨 **样式优化** - 针对不同平台自动优化样式
- 📊 **发布历史** - 记录所有发布历史
- ⚙️ **零配置** - 插件启动时自动启动 server，自动安装依赖

## 🎯 支持的平台

| 平台 | 状态 | 功能 |
|------|------|------|
| 微信公众号 | ✅ 完全支持 | 双封面、图片上传、样式优化 |
| 今日头条 | ✅ 完全支持 | 封面图上传、草稿管理、一键发布 |
| 知乎专栏 | ✅ 完全支持 | 草稿创建、内容发布、自动识别封面 |
| CSDN 博客 | 🚧 开发中 | 计划支持 |
| 掘金 | 🚧 开发中 | 计划支持 |

## 📦 安装

详细安装步骤请查看 [INSTALL.md](./INSTALL.md)

### 快速安装

1. 下载 `obsidian-publisher.zip`
2. 解压到 `<你的 Vault>/.obsidian/plugins/`
3. 在 Obsidian 中启用插件
4. 等待服务器自动启动（首次会自动安装依赖，需要 1-2 分钟）
5. 导入平台 Cookie
6. 开始发布！

## 🚀 快速开始

### 1. 自动启动服务器

插件启用后会自动启动服务器（首次启动会自动安装依赖，需要 1-2 分钟）

如需手动控制，可在 **设置** → **Multi-Platform Publisher** → **服务器管理** 中操作

### 2. 导入 Cookie

以微信公众号为例：

1. 浏览器登录 https://mp.weixin.qq.com/
2. 按 **F12** 打开开发者工具
3. 切换到 **Network** 标签
4. 刷新页面，点击任意请求
5. 复制 **Request Headers** 中的 **Cookie**
6. 在插件设置中粘贴并保存

其他平台类似：
- 今日头条：https://mp.toutiao.com/
- 知乎专栏：https://www.zhihu.com/
- CSDN 博客：https://mp.csdn.net/

### 3. 发布文章

**方式 1：发布对话框**
- 打开笔记 → 点击左侧 📤 图标 → 选择平台 → 发布

**方式 2：快速发布**
- 打开笔记 → 命令面板（Ctrl/Cmd + P）→ 搜索"快速发布" → 回车

**方式 3：右键菜单**
- 文件列表中右键点击笔记 → 选择"发布到平台"

## 📝 Front Matter 配置

在笔记开头添加元数据：

```markdown
---
title: 文章标题
image: https://example.com/cover.jpg
description: 文章摘要
tags: [标签1, 标签2]
categories: 分类
---

# 文章正文
```

## 💡 使用技巧

### 图片处理
- **微信公众号**：自动上传图片到微信素材库
- **今日头条**：自动上传图片到头条 CDN
- **知乎专栏**：使用公开图床（推荐使用文件名为 MD5 hash 的图片）
- 图片大小建议控制在 5MB 以内
- 支持格式：JPG、PNG、GIF、WebP

### 发布策略
- **微信公众号**：功能完整，支持双封面和图片自动上传
- **今日头条**：功能完整，支持封面图上传和一键发布
- **知乎专栏**：支持草稿创建和发布，封面图自动识别
- Cookie 通常 7-30 天过期，需定期更新

### 批量发布
在发布对话框中同时选择多个平台，一次发布到所有平台

## 🐛 常见问题

### Q: Server 无法启动
**A**: 确保已安装 Node.js 14+，检查端口 3000 是否被占用

### Q: Cookie 认证失败
**A**: Cookie 可能过期（7-30 天），重新登录平台并导出新 Cookie

### Q: 图片无法显示
**A**: 使用公开可访问的图床，图片大小控制在 5MB 以内

### Q: 知乎封面图不显示
**A**: 知乎会自动识别文章第一张图片作为封面，建议使用公开图床的图片。如果图片文件名是 MD5 hash（32位），知乎能更好地识别

更多问题请查看 [INSTALL.md](./INSTALL.md)

## 🔧 系统要求

- Obsidian 1.0.0+
- Node.js 14+
- 网络连接
- 支持平台：Windows、macOS、Linux

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

## 🙏 致谢

- [Wechatsync](https://github.com/wechatsync/Wechatsync) - 提供了宝贵的参考实现
- [Obsidian](https://obsidian.md/) - 优秀的笔记软件

---

**注意**: 本插件仅供学习和个人使用，请遵守各平台的使用条款。

const mmedia=require("./lib/mmedia"),fs=require("hexo-fs"),path=require("path"),mmedia_config=hexo.config.mmedia,loader_path=mmedia_config.loader_path||"/assets/mmedia/mmedia-loader.js",injector_layout=mmedia_config.injector_layout||["post"];loader_path.startsWith("http")||hexo.extend.generator.register("mmedia_loader",function(e){return{path:loader_path,data:function(){return fs.createReadStream(path.resolve(__dirname,"mmedia-loader.js"))}}}),injector_layout.forEach(e=>{hexo.extend.injector.register("head_end","<script> let HEXO_MMEDIA_DATA = { js: [], css: [], aplayerData: [], metingData: [], artPlayerData: [], dplayerData: []}; <\/script>",e),hexo.extend.injector.register("body_end",`<script src="${loader_path}"></script>`,e)}),hexo.extend.tag.register("mmedia",function(e,a){return mmedia(hexo,e,a)},{async:!0}),hexo.extend.tag.register("mmedias",function(e,a){return mmedia(hexo,e,a)},{ends:!0,async:!0});